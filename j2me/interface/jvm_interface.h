/*****************************************************************************
*  Copyright Statement:
*  --------------------
*  This software is protected by Copyright and the information contained
*  herein is confidential. The software may not be copied and the information
*  contained herein may not be used or disclosed except with the written
*  permission of MediaTek Inc. (C) 2005
*             
*  BY OPENING THIS FILE, BUYER HEREBY UNEQUIVOCALLY ACKNOWLEDGES AND AGREES
*  THAT THE SOFTWARE/FIRMWARE AND ITS DOCUMENTATIONS ("MEDIATEK SOFTWARE")
*  RECEIVED FROM MEDIATEK AND/OR ITS REPRESENTATIVES ARE PROVIDED TO BUYER ON
*  AN "AS-IS" BASIS ONLY. MEDIATEK EXPRESSLY DISCLAIMS ANY AND ALL WARRANTIES,
*  EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE IMPLIED WARRANTIES OF
*  MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE OR NONINFRINGEMENT.
*  NEITHER DOES MEDIATEK PROVIDE ANY WARRANTY WHATSOEVER WITH RESPECT TO THE
*  SOFTWARE OF ANY THIRD PARTY WHICH MAY BE USED BY, INCORPORATED IN, OR
*  SUPPLIED WITH THE MEDIATEK SOFTWARE, AND BUYER AGREES TO LOOK ONLY TO SUCH
*  THIRD PARTY FOR ANY WARRANTY CLAIM RELATING THERETO. MEDIATEK SHALL ALSO
*  NOT BE RESPONSIBLE FOR ANY MEDIATEK SOFTWARE RELEASES MADE TO BUYER'S
*  SPECIFICATION OR TO CONFORM TO A PARTICULAR STANDARD OR OPEN FORUM.
*
*  BUYER'S SOLE AND EXCLUSIVE REMEDY AND MEDIATEK'S ENTIRE AND CUMULATIVE
*  LIABILITY WITH RESPECT TO THE MEDIATEK SOFTWARE RELEASED HEREUNDER WILL BE,
*  AT MEDIATEK'S OPTION, TO REVISE OR REPLACE THE MEDIATEK SOFTWARE AT ISSUE,
*  OR REFUND ANY SOFTWARE LICENSE FEES OR SERVICE CHARGE PAID BY BUYER TO
*  MEDIATEK FOR SUCH MEDIATEK SOFTWARE AT ISSUE. 
*
*  THE TRANSACTION CONTEMPLATED HEREUNDER SHALL BE CONSTRUED IN ACCORDANCE
*  WITH THE LAWS OF THE STATE OF CALIFORNIA, USA, EXCLUDING ITS CONFLICT OF
*  LAWS PRINCIPLES.  ANY DISPUTES, CONTROVERSIES OR CLAIMS ARISING THEREOF AND
*  RELATED THERETO SHALL BE SETTLED BY ARBITRATION IN SAN FRANCISCO, CA, UNDER
*  THE RULES OF THE INTERNATIONAL CHAMBER OF COMMERCE (ICC).
*
*****************************************************************************/
/*****************************************************************************
 *
 * Filename:
 * ---------
 *
 *
 * Project:
 * --------
 *  MAUI
 *
 * Description:
 * ------------
 *
 *
 * Author:
 * -------
 * -------
 * -------
 * -------
 *                      
 *============================================================================
 *             HISTORY
 * Below this line, this part is controlled by PVCS VM. DO NOT MODIFY!!
 *------------------------------------------------------------------------------
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 *
 *------------------------------------------------------------------------------
 * Upper this line, this part is controlled by PVCS VM. DO NOT MODIFY!!
 *============================================================================
 ****************************************************************************/

#ifndef JAL_JVM_INTERFACE_H
#define JAL_JVM_INTERFACE_H

#ifdef __J2ME__

/*************************************************************************
 * Include Header Files
 *************************************************************************/
#include "keypad_sw.h"
#include "fat_fs.h"
#include "j2me_custom.h"
#include "j2me_custom_param.h"
#include "jvm_trace_interface.h"
#include "jvm_file.h"
#include "jvm_mem.h"

/*************************************************************************
 * VM Runtime
 *************************************************************************/
#define JVM_DEBUG_STRINGBUFFER_SIZE                   (512)
#define LITTLE_ENDIAN                              (1)

/* this compile option will be used by VM. */
#if defined(__MTK_TARGET__) && (defined(MT6228) || defined(MT6229) || defined(MT6230)) && !defined(APPMEM_SUPPORT) && (defined(__IJET_VM__) || defined(__NEMO_VM__))
#ifdef J2ME_SLIM_MEMORY_SUPPORT
#define DATACACHE_FBBR_ON                          (0)
#else /* J2ME_SLIM_MEMORY_SUPPORT */
#define DATACACHE_FBBR_ON                          (1)

/* the size should be 1024k, 768k, 512k for FBBR*/
#if !((DEFAULTHEAPSIZE == 524288) || (DEFAULTHEAPSIZE == 786432) || (DEFAULTHEAPSIZE == 1048576) || \
      (DEFAULTHEAPSIZE == 1572864) || (DEFAULTHEAPSIZE == 2097152) || (DEFAULTHEAPSIZE == 3145728) || \
      (DEFAULTHEAPSIZE == 4194304) || (DEFAULTHEAPSIZE == 5242880) || (DEFAULTHEAPSIZE == 6291456) || (DEFAULTHEAPSIZE == 8388608))
 Error!! Please use 8M, 6M, 5M, 4M, 3M, 2M, 1536k, 1024k, 768k, 512k as the heap size when FBBR mode on.
#endif /* DEFAULTHEAPSIZE */

#endif /* J2ME_SLIM_MEMORY_SUPPORT */
#else  /* defined(__MTK_TARGET__) && (defined(MT6228) || defined(MT6229) || defined(MT6230)) && !defined(APPMEM_SUPPORT) && (defined(__IJET_VM__) || defined(__NEMO_VM__) */
#define DATACACHE_FBBR_ON                          (0)
#endif /* defined(__MTK_TARGET__) && (defined(MT6228) || defined(MT6229) || defined(MT6230)) && !defined(APPMEM_SUPPORT) && (defined(__IJET_VM__) || defined(__NEMO_VM__) */

#ifndef __MTK_TARGET__
typedef __int64 kal_long64;
typedef unsigned __int64 kal_ulong64;

#define LONGLONGTYPE(value)                        value
#else /* __MTK_TARGET__ */ 
typedef long long kal_long64;
typedef unsigned long long kal_ulong64;

#define LONGLONGTYPE(value)                        value##ll
#endif /* __MTK_TARGET__ */ 

#define YEAR                                    (1)
#define MONTH                                   (2)
#define DAY_OF_MONTH                               (5)
#define HOUR                                    (10)
#define MINUTE                                     (12)
#define SECOND                                     (13)
#define MILLISECOND                             (14)

#ifndef MAXCALENDARFLDS
#define MAXCALENDARFLDS                            (15)
#endif 

#define TICK_2_MS(tick)                            (unsigned int)(((kal_long64)(tick) * 302448) >> 16)
#define MS_2_TICK(ms)                              (unsigned int)(((kal_long64)(ms) * 14200) >> 16)

extern float jvm_get_timezone_impl(void);
extern kal_int8 * jvm_get_home_city_impl(void);
#define jvm_get_timezone                           jvm_get_timezone_impl
#define jvm_get_home_city                          jvm_get_home_city_impl

/*****************************************************************************
 * FUNCTION
 *  jvm_get_currenttime_tick
 * DESCRIPTION
 *  
 * PARAMETERS
 *  void
 * RETURNS
 *  
 *****************************************************************************/
__inline kal_uint32 jvm_get_currenttime_tick(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    kal_uint32 tick;

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    kal_get_time(&tick);
#ifndef __MTK_TARGET__
    tick <<= 6;
#endif 
    return tick;
}


/*****************************************************************************
 * FUNCTION
 *  jvm_get_currenttime_ms
 * DESCRIPTION
 *  
 * PARAMETERS
 *  void
 * RETURNS
 *  
 *****************************************************************************/
__inline kal_uint32 jvm_get_currenttime_ms(void)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    kal_uint32 current_time_ticks;

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    /* get current system ticks */
    current_time_ticks = jvm_get_currenttime_tick();
#ifndef __MTK_TARGET__
    current_time_ticks <<= 6;
#endif 
    return TICK_2_MS(current_time_ticks);
}


/*****************************************************************************
 * FUNCTION
 *  j2me_ms_2_tick
 * DESCRIPTION
 *  
 * PARAMETERS
 *  time_period     [IN]        
 * RETURNS
 *  
 *****************************************************************************/
__inline long j2me_ms_2_tick(kal_long64 time_period)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    return (long)MS_2_TICK(time_period);
}

typedef enum
{
    MIDP_SUCCESS = 0x00000000,

    /* Persistent Storage Error */
    MIDP_STORAGE_ERROR = 0x00010000,
    MIDP_STORAGE_FILENAME_TOO_LONG_ERROR = MIDP_STORAGE_ERROR,
    MIDP_STORAGE_OPEN_ERROR,
    MIDP_STORAGE_CLOSE_ERROR,
    MIDP_STORAGE_READ_ERROR,
    MIDP_STORAGE_WRITE_ERROR,
    MIDP_STORAGE_FULL_ERROR,
    MIDP_STORAGE_POSITION_ERROR,
    MIDP_STORAGE_SIZEOF_ERROR,
    MIDP_STORAGE_TRUNCATE_ERROR,
    MIDP_STORAGE_DELETEFILE_ERROR,
    MIDP_STORAGE_RENAMEDFILENOTEXIST_ERROR,
    MIDP_STORAGE_RENAME_ERROR,

    /* Comm Protocol Error */
    MIDP_COMMPROTOCOL_ERROR = 0x00020000,
    MIDP_COMMPROTOCOL_OPENPORT_ERROR = MIDP_COMMPROTOCOL_ERROR,
    MIDP_COMMPROTOCOL_WRITEPORT_ERROR,
    MIDP_COMMPROTOCOL_READPORT_ERROR,

    /* Socket Protocol Error */
    MIDP_CONNECT_ERROR = 0x00030000,
    MIDP_CONNECT_CONNECTIONNOTFOUND = MIDP_CONNECT_ERROR,
    MIDP_CONNECT_IOEXCEPTION,
    MIDP_CONNECT_ARGEXCEPTION,

    MAX_MIDP_ERROR_CODE
} midp_error_code;

typedef enum{
    JVM_MIDLET_MESSAGE_ALL = 0,
    JVM_MIDLET_MESSAGE_JAD,
    JVM_MIDLET_MESSAGE_JAR,
    JVM_MIDLET_MESSAGE_MANIFEST
}midlet_message_content_type_enum;

#ifdef KDWP_DEBUG 
typedef enum{
    JVM_DEBUG_NONE = 0,
    JVM_DEBUG_CATCHER,
    JVM_DEBUG_COMM,
    JVM_DEBUG_COMM_MODIS,
    JVM_DEBUG_END
}jvm_debug_mode_enum;

extern kal_int32 g_jvm_debug_mode;

#endif
extern char *getErrorMsg(midp_error_code major_code, midp_error_code minor_code);

typedef void (*keypad_cb_funcptr)(kal_uint16 , kal_uint16 );
typedef void (*tp_cb_funcptr)(kal_uint16 x, kal_uint16 y, kal_uint16 type );

extern void jvm_get_calendar_time(kal_uint32 *calendar_time);
extern long jvm_get_julian_day(int year, int month, int day);
extern kal_uint64 jvm_get_julian_time_ms(
                    unsigned short year,
                    unsigned char month,
                    unsigned char day,
                    unsigned char hour,
                    unsigned char minute,
                    unsigned char second,
                    int milli);

extern kal_char *jvm_str_dup(kal_char *string, kal_int32 length);

extern void jvm_task_sleep(kal_uint32 sleep_ticks);

extern void jvm_init_cache(unsigned char *start, unsigned char *end);
extern void jvm_release_cache(void);
extern void jvm_flush_cache(unsigned char *start, int size);
extern void jvm_keypad_event_notifier_register(keypad_cb_funcptr fp);

/*************************************************************************
 * VM Memory Configuration
 *************************************************************************/
extern kal_uint32 *jvm_allocate_heap(long size);
extern void jvm_release_heap(kal_uint32 *space);
extern kal_uint32 jvm_get_heap_size(void);

extern kal_uint32 *jvm_allocate_runtime(long size);
extern void jvm_release_runtime(kal_uint32 *space);

extern long *javaheap_space;
extern kal_uint32 javaheap_size;

extern long *javaruntime_space;
extern kal_uint32 javaruntime_size;
extern kal_uint32 javaruntime_poolflag;

typedef enum
{
    JAVARUNTIME_POOL_GETLIST,
    JAVARUNTIME_POOL_GETINFO,
    JAVARUNTIME_POOL_GETSETTING,
    JAVARUNTIME_POOL_PUSHGETSETTING,
    JAVARUNTIME_POOL_SETSETTING,
    JAVARUNTIME_POOL_UPDATE,
    JAVARUNTIME_POOL_REMOVE,
    JAVARUNTIME_POOL_INSTALL,
    JAVARUNTIME_POOL_RUNTIME
} javaruntime_pool_type_enum;


/*************************************************************************
* VM File
*************************************************************************/

extern kal_int32 jvm_get_imsi_crc32(void);
extern void jvm_get_imsi_all(kal_uint8* buf,int vmId);
extern kal_uint8* jvm_get_imsi_mcc(void);
extern kal_uint8* jvm_get_imsi_mnc(void);
extern kal_bool  jvm_get_imei_value(kal_uint8 length, kal_uint8 *imei_buf, kal_uint16 rec_index);
extern kal_char* jvm_get_nw_ratio(void);
extern kal_char* jvm_get_lai_cell_id(void);
extern kal_char* jvm_get_lai_lac(void);
extern kal_char* jvm_get_lai_cmcc(void);
extern kal_char* jvm_get_lai_cmnc(void);
extern kal_bool jvm_get_ext_queue_info(kal_uint32 *messages);

/*************************************************************************
 *  Screen switch
 *************************************************************************/

#include "jvm_def.h"

extern void jam_exit_screen(void *vm_ptr);  /* called by JVM  */
extern void jam_enter_screen(kal_int32 vm_id); /* called by MMI normally, special case in TCK*/
extern void jvm_goto_idle_screen(kal_int32 vm_id); /* called by JVM  */
extern kal_bool jam_mvm_send_pause_ind(kal_int32 vm_id);   /* called by JVM  */
extern kal_bool jam_mvm_send_resume_ind(kal_int32 vm_id); /* called by JVM  */
extern kal_bool jam_mvm_send_terminate_ind(kal_int32 vm_id);  /* called by JVM */
extern kal_bool jam_mvm_send_terminating_ind(kal_int32 vm_id); /* called by JVM */ /*20110221,ehance the exit speed */
extern kal_bool _jam_set_mmi_Lock(kal_bool lock, kal_char *file, kal_uint32 line);    /* called by Java */
#define jvm_set_mmi_Lock( lock ) _jam_set_mmi_Lock(lock, __FILE__, __LINE__)
extern void jvm_shutdownAllExternal(kal_bool is_forced);// 20100510: Changed   /* implemented by vendor */
extern void jvm_init_vm_external(kal_int32 vm_id);  // 20100403: Changed   /* implemented by vendor */
extern void jvm_reset_vm_external(kal_int32 vm_id); // 20100403: Changed   /* implemented by vendor */
extern void jvm_pause_vm_external(kal_int32 vm_id, jvm_state_enum vm_state, kal_bool pause_midlet);  // 20100403: Changed    /* implemented by vendor */
extern void jvm_resume_vm_external(kal_int32 vm_id, jvm_state_enum dst); // 20120102: Changed  /* implemented by vendor */
extern void jvm_stop_vm_external(kal_int32 vm_id);  // 20100403: Changed   /* implemented by vendor */
extern void jvm_minimize_vm_external(kal_int32 vm_id); // 20100518: Added
extern void jvm_active_vm_external(kal_int32 vm_id);
extern kal_uint32 jvm_util_atoi(kal_char *s);
/*************************************************************************
 *  JVM Timer
 *************************************************************************/
extern kal_int32 jvm_start_timer(kal_uint32 period, kal_timer_func_ptr timer_expiry, void *arg);
/*************************************************************************
 *  JVM Debug KDWP
 *************************************************************************/
#ifdef KDWP_DEBUG 
extern kal_bool jvm_debug_write_to_comm(const kal_uint8 *pData, kal_uint32 nLen);
extern kal_bool jvm_debug_send(const kal_uint8 *pData, kal_uint32 nLen, kal_bool bEnd);
extern void jvm_debug_write_ind_handler(int port);
extern kal_bool jvm_debug_init(void);
void jvm_debug_init_create_mutex(void);
extern void jvm_debug_read_from_comm(kal_int32 port);
#endif
extern void jvm_stop_timer(kal_int32 timer_id);
extern void jvm_stop_all_timer(void);
/*************************************************************************
 *  Keypad adaptor
 *************************************************************************/
extern kal_bool jvm_keypad_fetch(kal_uint16 *code, kal_uint16 *type);
extern kal_bool jvm_tp_fetch(kal_uint16 *x, kal_uint16 *y, kal_uint16 *type);
extern void jvm_keypad_flush(void);
extern void jvm_tp_flush(void);

extern kal_bool jvm_is_vibrate(void);
extern kal_bool jvm_startVibrate(int dursamples);
extern kal_bool jvm_stopVibrate_call_by_Jdaemon(void);
extern kal_bool jvm_stopVibrate(void);
extern kal_bool jvm_BackLightOn(void);
extern kal_bool jvm_BackLightOff(void);

extern void set_jvm_heap_size(kal_uint32 size);
extern kal_int32 jvm_runtime_mem_initialize(long *runtime_pool, kal_int32 size);

/* COMM read/write indication handler */
typedef void (*jam_comm_read_ind_handler) (int port);
typedef void (*jam_comm_write_ind_handler) (int port);
extern void jam_comm_register_io_ind_handler(
             jam_comm_read_ind_handler read_handler,
             jam_comm_write_ind_handler write_handler);

/* COMM APIs */
extern int jam_comm_open(long port, long baudRate, long options);
extern void jam_comm_config(kal_uint32 port, long baud_rate, unsigned long options);
extern int jam_comm_putbytes(kal_uint32 port, kal_uint8 *buff, kal_uint16 len);
extern int jam_comm_getbytes(kal_uint32 port, kal_uint8 *buff, kal_uint16 len);
#if defined(__NEMO_VM__)
extern int jam_comm_available(kal_uint32 port);
#endif /* __NEMO_VM__ */
extern int commCloseHandle(int hPort);
extern void jvm_comm_usb_in_java_register_cb(kal_bool usb_is_plug_in);

extern kal_uint8 jam_get_aud_volume_level(void);
extern kal_uint8 jam_get_ring_volume_level(void);
extern void jam_set_aud_volume_level(kal_int8 level);
extern kal_uint8 jam_get_vib_on(void);
extern kal_uint8 jam_get_net_icon_setting(void);


extern kal_uint8 jam_get_app_id(kal_int32 vm_id);
extern kal_uint8 jam_mvm_get_valid_sim_id(kal_int32 vm_id);
extern kal_uint8 jam_mvm_get_wap_prof_id(kal_int32 vm_id);
extern void jam_press_dec_volume_level(void);
extern void jam_press_inc_volume_level(void);

extern kal_int32 jvm_util_midlet_msg_decode(
            kal_wchar *decoded_file_path, 
            kal_wchar *midlet_msg_path, 
            midlet_message_content_type_enum specfiy_type);
#if defined(__DRM_SUPPORT__) && defined(__MMI_JAVA_PACKAGE_MIDS__)
extern kal_wchar* jvm_util_package_midlet_message(kal_wchar *jad_path, kal_wchar *jar_path, kal_wchar *output_dir,  kal_bool decJar, kal_int32 *error);
extern kal_wchar* jvm_util_copy_and_rename_jar(kal_wchar* new_name, kal_wchar* file_path, kal_wchar* output_dir, kal_int32 *error);
extern kal_bool jvm_util_is_midlet_msg_file(kal_wchar *midlet_msg_path);
extern kal_char* jvm_util_get_work_sys_dir_path(void);
extern void jvm_util_delete_midlet_msg_temp_file(void);
#endif

#ifdef __BT_SPK_VOL_CONTROL__
#include "MMIDataType.h"
MMI_BOOL jam_bt_volume_sync_hdlr(U8 volume, MMI_BOOL is_mute);
#endif

extern kal_uint32 jvm_util_update_crc(kal_uint32 crc, kal_char *buf, kal_uint32 len);
extern kal_uint32 jvm_util_atoi(kal_char *s);
#endif /* __J2ME__ */ 
#endif /* JAL_JVM_INTERFACE_H */ 

