/*****************************************************************************
*  Copyright Statement:
*  --------------------
*  This software is protected by Copyright and the information contained
*  herein is confidential. The software may not be copied and the information
*  contained herein may not be used or disclosed except with the written
*  permission of MediaTek Inc. (C) 2005
*
*  BY OPENING THIS FILE, BUYER HEREBY UNEQUIVOCALLY ACKNOWLEDGES AND AGREES
*  THAT THE SOFTWARE/FIRMWARE AND ITS DOCUMENTATIONS ("MEDIATEK SOFTWARE")
*  RECEIVED FROM MEDIATEK AND/OR ITS REPRESENTATIVES ARE PROVIDED TO BUYER ON
*  AN "AS-IS" BASIS ONLY. MEDIATEK EXPRESSLY DISCLAIMS ANY AND ALL WARRANTIES,
*  EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE IMPLIED WARRANTIES OF
*  MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE OR NONINFRINGEMENT.
*  NEITHER DOES MEDIATEK PROVIDE ANY WARRANTY WHATSOEVER WITH RESPECT TO THE
*  SOFTWARE OF ANY THIRD PARTY WHICH MAY BE USED BY, INCORPORATED IN, OR
*  SUPPLIED WITH THE MEDIATEK SOFTWARE, AND BUYER AGREES TO LOOK ONLY TO SUCH
*  THIRD PARTY FOR ANY WARRANTY CLAIM RELATING THERETO. MEDIATEK SHALL ALSO
*  NOT BE RESPONSIBLE FOR ANY MEDIATEK SOFTWARE RELEASES MADE TO BUYER'S
*  SPECIFICATION OR TO CONFORM TO A PARTICULAR STANDARD OR OPEN FORUM.
*
*  BUYER'S SOLE AND EXCLUSIVE REMEDY AND MEDIATEK'S ENTIRE AND CUMULATIVE 
*  LIABILITY WITH RESPECT TO THE MEDIATEK SOFTWARE RELEASED HEREUNDER WILL BE,
*  AT MEDIATEK'S OPTION, TO REVISE OR REPLACE THE MEDIATEK SOFTWARE AT ISSUE,
*  OR REFUND ANY SOFTWARE LICENSE FEES OR SERVICE CHARGE PAID BY BUYER TO
*  MEDIATEK FOR SUCH MEDIATEK SOFTWARE AT ISSUE. 
*
*  THE TRANSACTION CONTEMPLATED HEREUNDER SHALL BE CONSTRUED IN ACCORDANCE
*  WITH THE LAWS OF THE STATE OF CALIFORNIA, USA, EXCLUDING ITS CONFLICT OF
*  LAWS PRINCIPLES.  ANY DISPUTES, CONTROVERSIES OR CLAIMS ARISING THEREOF AND
*  RELATED THERETO SHALL BE SETTLED BY ARBITRATION IN SAN FRANCISCO, CA, UNDER
*  THE RULES OF THE INTERNATIONAL CHAMBER OF COMMERCE (ICC).
*
*****************************************************************************/
/*******************************************************************************
 * Filename:
 * ---------
 * jal_jam_interface.h
 *
 * Project:
 * --------
 *   MAUI
 *
 * Description:
 * ------------
 *    
 *
 * Author:
 * -------
 * -------
 *
 *==============================================================================
 *             HISTORY
 * Below this line, this part is controlled by PVCS VM. DO NOT MODIFY!! 
 *------------------------------------------------------------------------------
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 * removed!
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 *------------------------------------------------------------------------------
 * Upper this line, this part is controlled by PVCS VM. DO NOT MODIFY!! 
 *============================================================================== 
 *******************************************************************************/

#ifndef JAL_JAM_INTERFACE_H
#define JAL_JAM_INTERFACE_H
#include "kal_release.h"
#include "stack_common.h"
#include "stack_msgs.h"
#include "task_main_func.h"
#include "app_ltlcom.h"
#include "stack_types.h"
#include "app_buff_alloc.h"
//#include "wap_ps_struct.h"
#include "wps_struct.h"//
#include "j2me_custom.h"
#include "mexe_struct.h"
/*************************************************************************
 * Global Definiton
 *************************************************************************/
/* COMM options */
#define COMM_STOP_BITS_2                        (0x01)
#define COMM_ODD_PARITY                         (0x02)
#define COMM_EVEN_PARITY                        (0x04)
#define COMM_AUTO_RTS                           (0x10)
#define COMM_AUTO_CTS                           (0x20)
#define COMM_BITS_PER_CHAR_7                    (0x80)
#define COMM_BITS_PER_CHAR_8                    (0xC0)
#define J2ME_GET_NEXT_EVENT_ABORT                  (-0x1234567)

/* DRM defines for instalation */
#define DRM_INVALID_FORMAT                     (-2)
#define DRM_PROCESS_ERROR                      (-1)

/* domain setting constant */
#define DOMAIN_SWITCH    "__OFF__"
#define DOMAIN_MAX_COUNT 10
#define DOMAIN_MAX_LEN   30

#if defined(__MMI_MAINLCD_320X480__)
#define MAX_INSTALL_ICON_WIDTH     25
#define MAX_INSTALL_ICON_HEIGHT    25
#elif defined(__MMI_MAINLCD_240X400__)
#define MAX_INSTALL_ICON_WIDTH     20
#define MAX_INSTALL_ICON_HEIGHT    20
#elif defined(__MMI_MAINLCD_240X320__) || defined(__MMI_MAINLCD_320X240__)
#define MAX_INSTALL_ICON_WIDTH     20
#define MAX_INSTALL_ICON_HEIGHT    20
#elif defined(__MMI_MAINLCD_176X220__)
#define MAX_INSTALL_ICON_WIDTH     15
#define MAX_INSTALL_ICON_HEIGHT    15
#elif defined(__MMI_MAINLCD_128X160__)
#define MAX_INSTALL_ICON_WIDTH     15
#define MAX_INSTALL_ICON_HEIGHT    15
#elif defined(__MMI_MAINLCD_128X128__)
#define MAX_INSTALL_ICON_WIDTH     15
#define MAX_INSTALL_ICON_HEIGHT    15
#elif defined(__MMI_MAINLCD_480X800__)
#define MAX_INSTALL_ICON_WIDTH     25
#define MAX_INSTALL_ICON_HEIGHT    25
#else
#define MAX_INSTALL_ICON_WIDTH     20
#define MAX_INSTALL_ICON_HEIGHT    20
#endif


#define MMI_ICON_FMT_PBM_HEADER_LEN 21
/* Enable the definition when you want all JAR file to be encrypted */

#define ENCRYPT_JAR_FILE

#define mmi_java_set_mode_req_handler jam_set_mode_req_handler
typedef enum
{
    JAM_TASK_IN_INIT,
    JAM_TASK_IN_PRE_MAIN,
    JAM_TASK_IN_MAIN,
    JAM_TASK_END
}jam_task_state;

/* VM exit code enumation */
typedef enum
{
    JAVA_EXIT_FATAL_ERROR = 127,
    JAVA_EXIT_NO_THREAD_EXECUTING_ERROR = -1,
    JAVA_EXIT_MAIN_OK = 2001,
    JAVA_EXIT_THREAD_INTERRUPTED = 128
} java_exit_code_enum;

/* The enumeration of security levels that is used in mids_settting_structure. */
typedef enum
{
    PERMISSION_NEVER = 0x00,
    PERMISSION_ALLOW = 0x01,
    PERMISSION_BLANKET_GRANTED = 0x02,
    PERMISSION_BLANKET = 0x04,
    PERMISSION_SESSION = 0x08,
    PERMISSION_ONE_SHOT = 0x10,
    PERMISSION_DENY_SESSION = 0x20,
    PERMISSION_DENY = 0x40,
    PERMISSION_USER_DENIED = 0x80
} mids_setting_struct_enum;

/* mmi_java_error_code_enum - Returned error codes */
typedef enum
{
    J2ME_NO_ERROR                       =0 ,/* Success */
    J2ME_MIDS_NOT_EXIST                 =1 ,/* MIDlet suite does not exist */
    J2ME_INSUFFICIENT_MEMORY            =2 ,
    J2ME_INSUFFICIENT_STORAGE           =3 ,
    J2ME_UNDEFINED_SETTING              =4 ,/* Used in SET_SETTING message. */
    J2ME_FILE_NOT_FOUND                 =5 ,
    J2ME_FILE_DONWLOAD_FAILED           =6 ,/* general download fail */
    J2ME_FILE_DOWNLOAD_CANT_CREATE_FILE =7 ,/* when file download , we can't open temp file to store data */
    J2ME_FILE_DOWNLOAD_CONNECTION_ABORT =8 ,/* connection lost */
    J2ME_USER_CANCEL                    =9 ,/* User Cancel */
    J2ME_ACTION_FAILE                   =10,
    J2ME_INSTALL_FAIL                   =11,
    J2ME_INSTALL_NUM_OVER               =12,
    J2ME_INVALID_REQUEST                =13,
    /*
     * If Java task receives an invalid request, such as, MMI sends 
     * * MMI_JAVA_MIDS_REMOVE_REQ when Java is in initial state, Java 
     * * task will return MMI_JAVA_MIDS_REMOVE_CNF with the error code 80. 
     */
    J2ME_READ_MIDS_LIST_FIlE_FAILURE    =14,
    J2ME_ABORT_FAIL                     =15,
    J2ME_VM_IS_BUSY                     =16,
    J2ME_DRM_PROHIBIT                   =19,
    J2ME_DRM_NO_RIGHT                   =20,
    J2ME_INSUFFICIENT_MEMORY_WHOLE_POOL =21,    /* Used when midlet run need all ASM pool */
    J2ME_FILE_WRITE_ERROR           =22,
    JAD_NOT_FOUND         = 100,
    MISSING_PROVIDER_CERT = 101,
    CORRUPT_PROVIDER_CERT = 102,
    UNKNOWN_CA            = 103,
    INVALID_PROVIDER_CERT = 104,
    CORRUPT_SIGNATURE     = 105,
    INVALID_SIGNATURE     = 106,
    UNSUPPORTED_CERT      = 107,
    EXPIRED_PROVIDER_CERT = 108,
    EXPIRED_CA_KEY        = 109,
    MISSING_SUITE_NAME    = 110,
    MISSING_VENDOR        = 111,
    MISSING_VERSION       = 112,
    INVALID_VERSION       = 113,
    OLD_VERSION           = 114,
    MISSING_JAR_URL       = 115,
    DISK_NOT_FOUND        = 116,
    JAR_NOT_FOUND         = 117,
    MISSING_JAR_SIZE      = 118,
    SUITE_NAME_MISMATCH   = 119,
    VERSION_MISMATCH      = 120,
    VENDOR_MISMATCH       = 121,
    INVALID_KEY           = 122,
    INVALID_VALUE         = 123,
    INSUFFICIENT_STORAGE  = 124,
    JAR_SIZE_MISMATCH     = 125,
    NEW_VERSION           = 127,
    JAD_MOVED             = 128,
    CORRUPT_JAR           = 129,
    ALREADY_INSTALLED     = 130,
    DEVICE_INCOMPATIBLE   = 131,
    MISSING_CONFIGURATION = 132,
    MISSING_PROFILE       = 133,
    INVALID_JAD_URL       = 134,
    INVALID_JAR_URL       = 135,
    PUSH_DUP_FAILURE      = 136,
    PUSH_FORMAT_FAILURE   = 137,
    PUSH_PROTO_FAILURE    = 138,
    PUSH_CLASS_FAILURE    = 139,
    AUTHORIZATION_FAILURE = 140,
    ATTRIBUTE_MISMATCH    = 141,
    TRUSTED_OVERWRITE_FAILURE       = 142,
    INVALID_CONTENT_HANDLER         = 143, // 20080715: Added
    CONTENT_HANDLER_CONFLICT        = 145, // 20080715: Added
    DEFAULT_GAME                    = 146,
    DISK_OPERATION_FAIL             = 147,
    DISK_NOT_FOUND_WHEN_UPDATE      = 148,
    UPDATE_NOT_NEW_VERSION          = 149,
    UPDATE_LOCAL_INSTALL            = 150,
    DEFAULT_GAME_CAN_NOT_UPDATE     = 151,
    USER_CANCEL                     = 152,
    PUSH_INSTALL                    = 153,
    NORMAL_INSTALL                  = 154,
    INSTALL_NA                      = 155,
    OVER_MAX_INSTALL                = 156,
    DRM_PROHIBIT                    = 157,
    TOO_MANY_MID                    = 158,
    AUTHORIZED_BY                   = 159,
    UNSUPPORT_MIDLET                = 160,
    DRM_RIGHT_NOT_RECEIVED          = 161,
    POST_ERROR                      = 162,     /* CMCC spec extension */
    MEMORY_ALLACTION_FAILURE        = 163,
    ROOT_DIR_FULL                   = 164,
    JAVA_NO_CARD                    = 165,
    MISMATCH_RUNTIME_EXEC_ENV       = 166,
    INCORRECT_MIDLET_DATA           = 167,
    INSTALL_UNTRUSTED_MIDS_CONFIRM  = 168,
    MISSING_SUITE_INSTALL_NOTIFY    = 169,
    MISSING_DELETE_NOTIFY           = 170,
    DRM_NO_RIGHT                    = 171,
    TERMINATE_VM                    = 172,
    PACKAGE_FAIL                    = 173,
    OVER_MAX_VM_NUM                 = 174,
    USB_IN_USE                      = 175,
    BT_IN_USE                       = 176,
    MTV_IN_USE                      = 176,
    MIDLET_RUNNING                  = 177,
    WRITE_PROTECTION                = 178,
    NULL_PTR_EXCEPTION = 180,
    ARITHMETICS_DIV = 181,
    INDEX_OF_BOUND = 182,
    COMMAND_OK = 200,
    COMMAND_CANCEL = 201,
    COMMAND_BACK = 202,
    COMMAND_DONE = 203,
    COMMAND_SAVE = 204,
    COMMAND_OPTIONS = 205,
    STRING_DATE = 207,
    STRING_TIME = 208,
    J2ME_UNDEFINED_ERROR = 209
} mmi_java_error_code_enum;

typedef enum
{
    CAN_BE_UPDATE = 0x1,
    CAN_BE_REMOVE = 0x2,
    IS_DEFAULT_GAME = 0x4,
    CAN_BE_SEND = 0x8
} mids_attributes_enum;

typedef enum
{
    MIDS_PARSELIST_FULL_MODE,   /* Get full information */
    MIDS_PARSELIST_REDUCED_MODE /* Get mids total count only, to reduce memory budget */
} mids_parselist_mode_enum;

typedef enum
{
    JAVA_PERMISSION_SOCKET = 1,
    JAVA_PERMISSION_HTTP,
    JAVA_PERMISSION_HTTPS,
    JAVA_PERMISSION_SSL,
    JAVA_PERMISSION_DATAGRAM,
    JAVA_PERMISSION_SVR_SOCKET,
    JAVA_PERMISSION_SVR_DATAGRAM,
    JAVA_PERMISSION_RTSP,
    JAVA_PERMISSION_COMM,
    JAVA_PERMISSION_PUSH,
    JAVA_PERMISSION_SMS,
    JAVA_PERMISSION_CBS,
    JAVA_PERMISSION_MMS,
    JAVA_PERMISSION_RECORD_CTRL,
    JAVA_PERMISSION_SNAPSHOT,
    JAVA_PERMISSION_FILE_READ,
    JAVA_PERMISSION_FILE_WRITE,
    JAVA_PERMISSION_CONTACT_LIST_READ,
    JAVA_PERMISSION_CONTACT_LIST_WRITE,
    JAVA_PERMISSION_EVENT_LIST_READ,
    JAVA_PERMISSION_EVENT_LIST_WRITE,
    JAVA_PERMISSION_TODO_LIST_READ,
    JAVA_PERMISSION_TODO_LIST_WRITE,
    JAVA_PERMISSION_CONTENTHANDLER,
    JAVA_PERMISSION_OBEX_CLIENT,
    JAVA_PERMISSION_OBEX_SERVER,
    JAVA_PERMISSION_OBEX_CLIENT_TCP,
    JAVA_PERMISSION_OBEX_SERVER_TCP,
    JAVA_PERMISSION_BT_CLIENT,
    JAVA_PERMISSION_BT_SERVER,
    JAVA_PERMISSION_TELEPHONE,
    JAVA_PERMISSION_APDU_AID,
    JAVA_PERMISSION_JCRMI,
    JAVA_PERMISSION_APDU_SAT,
    JAVA_PERMISSION_CONTACTLESS_DISCOVERY,
    JAVA_PERMISSION_CONTACTLESS_WRITE,
    JAVA_PERMISSION_NDEFTAG_OPEN,
    JAVA_PERMISSION_PLAINTAG_OPEN,
    JAVA_PERMISSION_ISOOFFFFT_OPEN,
    JAVA_PERMISSION_VISUALTAG_OPEN,
    JAVA_PERMISSION_EXCLUSIVE_PUSH,
    JAVA_PERMISSION_EXCLUSIVE_NET,
    JAVA_PERMISSION_LOCATION,
    JAVA_PERMISSION_LOCATION_ORIENTATION,
    JAVA_PERMISSION_LOCATION_PROXIMITYLISTENER,
    JAVA_PERMISSION_LOCATION_LANDMARKSTORE_READ,
    JAVA_PERMISSION_LOCATION_LANDMARKSTORE_WRITE,
    JAVA_PERMISSION_LOCATION_LANDMARKSTORE_CATEGORY,
    JAVA_PERMISSION_LOCATION_LANDMARKSTORE_MNGR,
    JAVA_PERMISSION_DISABLE_BACKGROUND,
    JAVA_PERMISSION_UNKNOWN
} java_get_permission_enum;

typedef enum
{
    /** com.ibm.ive.midp permission ID. */
	JAVA_PERMISSION_ID_MIDP = 0,
	/** com.ibm.ive.midp.ams permission ID. */
	JAVA_PERMISSION_ID_AMS = 1,
	/** javax.microedition.io.Connector.http permission ID. */
	JAVA_PERMISSION_ID_HTTP = 2,
	/** javax.microedition.io.Connector.socket permission ID. */
	JAVA_PERMISSION_ID_TCP = 3,
	/** javax.microedition.io.Connector.https permission ID. */
	JAVA_PERMISSION_ID_HTTPS = 4,
	/** javax.microedition.io.Connector.ssl permission ID. */
	JAVA_PERMISSION_ID_SSL = 5,
	/** javax.microedition.io.Connector.serversocket permission ID. */
	JAVA_PERMISSION_ID_TCP_SERVER = 6,
	/** javax.microedition.io.Connector.datagram permission ID. */
	JAVA_PERMISSION_ID_UDP = 7,
	/** javax.microedition.io.Connector.datagramreceiver permission ID. */
	JAVA_PERMISSION_ID_UDP_SERVER = 8,

	/** javax.microedition.io.Connector.rtsp permission ID. */
	JAVA_PERMISSION_ID_RTSP = 9,
	/** javax.microedition.io.Connector.comm permission ID. */
	JAVA_PERMISSION_ID_COMM = 10,
	/** javax.microedition.io.PushRegistry permission ID. */
	JAVA_PERMISSION_ID_PUSH = 11,
	/* Justin modified */
	/** javax.microedition.io.Connector.sms permission ID. */
	JAVA_PERMISSION_ID_SMS_SERVER = 12,
	/** javax.microedition.io.Connector.cbs permission ID. */
	JAVA_PERMISSION_ID_CBS_SERVER = 13,
	/** javax.wireless.messaging.sms.send permission ID. */
	JAVA_PERMISSION_ID_SMS_SEND = 14,
	/** javax.wireless.messaging.sms.receive permission ID. */
	JAVA_PERMISSION_ID_SMS_RECEIVE = 15,
	/** javax.wireless.messaging.cbs.receive permission ID. */
	JAVA_PERMISSION_ID_CBS_RECEIVE = 16,
	/** javax.microedition.io.Connector.mms permission ID. */
	JAVA_PERMISSION_ID_MMS_SERVER = 17,
	/** javax.wireless.messaging.mms.send permission ID. */
	JAVA_PERMISSION_ID_MMS_SEND = 18,
	/** javax.wireless.messaging.mms.receive permission ID. */
	JAVA_PERMISSION_ID_MMS_RECEIVE = 19,
	/** javax.microedition.media.control.RecordControl permission ID. */
	JAVA_PERMISSION_ID_MMA_RECORD = 20,
	/** javax.microedition.media.control.VideoControl.getSnapshot permission ID. */
	JAVA_PERMISSION_ID_MMA_SNAPSHOT = 21,
	/** javax.microedition.io.file.read permission ID. */
	JAVA_PERMISSION_ID_JSR_75_FILE_READ = 22,
	/** javax.microedition.io.file.write permission ID. */
	JAVA_PERMISSION_ID_JSR_75_FILE_WRITE = 23,
	/** javax.microedition.pim.ContactList.read permission ID. */
	JAVA_PERMISSION_ID_JSR_75_CONTACT_READ = 24,
	/** javax.microedition.pim.ContactList.write permission ID. */
	JAVA_PERMISSION_ID_JSR_75_CONTACT_WRITE = 25,
	/** javax.microedition.pim.EventList.read permission ID. */
	JAVA_PERMISSION_ID_JSR_75_EVENT_READ = 26,
	/** javax.microedition.pim.EventList.write permission ID. */
	JAVA_PERMISSION_ID_JSR_75_EVENT_WRITE = 27,
	/** javax.microedition.pim.ToDoList.read permission ID. */
	JAVA_PERMISSION_ID_JSR_75_TODO_READ = 28,
	/** javax.microedition.pim.ToDoList.write permission ID. */
	JAVA_PERMISSION_ID_JSR_75_TODO_WRITE = 29,
	/** javax.microedition.content.ContentHandler permission ID. */
	JAVA_PERMISSION_ID_CONTENTHANDLER = 30,

	/** javax.microedition.io.Connector.obex.client permission ID. */
	//JAVA_PERMISSION_ID_OBEX_CLIENT = 30,
	/** javax.microedition.io.Connector.obex.server permission ID. */
	//JAVA_PERMISSION_ID_OBEX_SERVER = 31,
	/** javax.microedition.io.Connector.obex.client.tcp permission ID. */
	//JAVA_PERMISSION_ID_OBEX_CLIENT_TCP = 32,
	/** javax.microedition.io.Connector.obex.serveer.tcp permission ID. */
	//JAVA_PERMISSION_ID_OBEX_SERVER_TCP = 33,
	/** javax.microedition.io.Connector.bluetooth.client permission ID. */
	//JAVA_PERMISSION_ID_BT_CLIENT = 34,
	/** javax.microedition.io.Connector.bluetooth.server permission ID. */
	//JAVA_PERMISSION_ID_BT_SERVER = 35,
	/** javax.microedition.apdu.aid permission ID. */
	JAVA_PERMISSION_ID_APDU_AID = 31,
	/** javax.microedition.jcrmi permission ID. */
	JAVA_PERMISSION_ID_JCRMI = 32,
	/** javax.microedition.apdu.sat permission ID. */
	JAVA_PERMISSION_ID_APDU_SAT = 33,
	/** javax.microedition.contactless.DiscoveryManager */
	JAVA_PERMISSION_ID_CONTACTLESS_DISCOVERY = 34,
	/** javax.microedition.contactless.ndef.NDEFTagConnection.write */
	JAVA_PERMISSION_ID_CONTACTLESS_WRITE = 35,
	/** javax.microedition.io.Connector.ndef */
	JAVA_PERMISSION_ID_NDEFTAG_OPEN = 36,
	/** javax.microedition.io.Connector.rf */
	JAVA_PERMISSION_ID_PLAINTAG_OPEN = 37,
	/** javax.microedition.io.Connector.sc */ 
	JAVA_PERMISSION_ID_ISOOFFFFT_OPEN = 38,
	/** javax.microedition.io.Connector.vtag */
	JAVA_PERMISSION_ID_VISUALTAG_OPEN = 39,
    /**javax.microedition.location.Location permission ID. */		
    JAVA_PERMISSION_ID_LOC_LOCATION = 40,
    /**javax.microedition.location.Orientation permission ID. */
    JAVA_PERMISSION_ID_LOC_ORIENTATION = 41,
    /**javax.microedition.location.ProximityListener permission ID. */
    JAVA_PERMISSION_ID_LOC_PRXLISTENER = 42,
    /**javax.microedition.location.LandmarkStore.read permission ID. */
    JAVA_PERMISSION_ID_LMS_READ = 43,
    /**javax.microedition.location.LandmarkStore.write permission ID. */
    JAVA_PERMISSION_ID_LMS_WRITE = 44,
    /**javax.microedition.location.LandmarkStore.category permission ID. */
    JAVA_PERMISSION_ID_LMS_CATEGORY = 45,
    /**javax.microedition.location.LandmarkStore.management permission ID. */
    JAVA_PERMISSION_ID_LMS_MANAGEMENT = 46,

	/* For platform request to make phone call */
	JAVA_PERMISSION_ID_TELEPHONE = 50000,
	JAVA_PERMISSION_ID_NET_EXCLUSIVE = 50001,

	JAVA_PERMISSION_ID_PUSH_EXCLUSIVE = 50002,

    JAVA_PERMISSION_ID_TOTAL
}java_permission_id_enum;
typedef enum
{
    JAVA_PERMISSION_CHOICE_ALWAYS = 1,
    JAVA_PERMISSION_CHOICE_YES_THIS_TIME,
    JAVA_PERMISSION_CHOICE_NO_THIS_TIME,
    JAVA_PERMISSION_CHOICE_NEVER
} java_get_permission_choice_enum;

typedef enum
{
    JAVA_CONFIRM_TEXT_VIEW_CATEGORY,
    JAVA_CONFIRM_NOTIFICATION_CATEGORY,
    JAVA_CONFIRM_UNKNOWN_CATEGORY = JAVA_CONFIRM_TEXT_VIEW_CATEGORY     /* default value */
} java_get_confirm_category_enum;

typedef enum
{
    //      JAVA_CONFIRM_INSTALL_ENUM,
    //      JAVA_CONFIRM_UPDATE_ENUM,
    //      JAVA_CONFIRM_REMOVE_ENUM,
    JAVA_CONFIRM_PERMISSION_ENUM,
    JAVA_CONFIRM_FOURWAY_KEY_ENUM,
    JAVA_CONFIRM_USER_DEFINE_ENUM,
    JAVA_CONFIRM_UNKNOWN_ENUM = JAVA_CONFIRM_USER_DEFINE_ENUM   /* default value */
} java_get_confirm_enum;

typedef enum
{
    RESOUCE_FAIL = -1,
    RESOUCE_NO_ERROR = 0,
    RESOUCE_NOT_FOUND,
    RESOUCE_EXISTED
} resource_error_code;

typedef enum
{
    JAVA_IDLE_STATE,
    JAVA_ACTIVATED_STATE,
    JAVA_PAUSED_STATE,
    JAVA_INVALID_STATE
} java_status;

typedef enum
{
    JAVA_NORMAL_MODE,
    JAVA_CLDC_TCK_MODE,
    JAVA_MIDP_TCK_MODE,
    JAVA_WMA_TCK_MODE,
    JAVA_MMAPI_TCK_MODE,
    JAVA_MAX_MODE = JAVA_MMAPI_TCK_MODE
} java_mode_enum;

typedef enum
{
    JAM_HTTP_NO_ERROR,
    JAM_HTTP_SET_CHANNEL_ERROR,
    JAM_HTTP_SERVER_RESPONSE_ERROR,
    JAM_HTTP_MEMORY_NOT_ENOUGH,
    JAM_HTTP_OPEN_FILE_ERROR,
    JAM_HTTP_USER_CANCEL,
    JAM_HTTP_STORAGE_NOT_ENOUGH,
    JAM_HTTP_INCORRECT_MIDLET_DATA,
    JAM_HTTP_BEARER_SWITCH
} jam_http_error;

typedef enum 
{
	VM_PNG_DECODER,
	INSTALLER_PNG_DECODER,
	PNG_DECODER_INVALID_VALUE	
}png_deocde_type;

typedef enum
{
    JAM_PR_BROWSER_OK = 0,
    JAM_PR_BROWSER_NO_NETWORK_SERVICE = -1,
    JAM_PR_BROWSER_NOT_AVAILABLE = -2,
    JAM_PR_BROWSER_URL_INVALIDATE = -3,
    JAM_PR_BROWSER_END
} jam_pr_browser_result_enum;

typedef enum
{
    JAM_PR_CALL_OK = 0,
    JAM_PR_CALL_INVALID_PHONE_NUMBER = -1,
    JAM_PR_CALL_NO_SIM = -2,
    JAM_PR_CALL_NOT_AVAILABLE = -3,
    JAM_PR_CALL_END
} jam_pr_call_result_enum;

typedef enum
{
    JAM_PR_RTSP_OK = 0,
    JAM_PR_RTSP_NO_NETWORK_SERVICE = -1,
    JAM_PR_RTSP_NOT_SUPPORT = -2,
    JAM_PR_RTSP_NOT_AVAILABLE = -3,
    JAM_PR_RTSP_URL_INVALIDATE = -4,
    JAM_PR_RTSP_END
} jam_pr_rtsp_result_enum;

/*home screen */
typedef enum
{
    JAM_NONE_FILTER = 0,
    JAM_DISK_FILTER = 0x01,
    JAM_TRUST_FILTER = 0x02,
    JAM_VENDOR_FILTER = 0x04,
    JAM_DEFAULT_GAME_FILTER = 0x08,
    JAM_CATEGORY_FILTER = 0x10,     
    JAM_FILTER_END
} jam_getlist_filter_type_enum;

typedef enum
{
    MIDS_NETWORK_PROFILE_ADD,
    MIDS_NETWORK_PROFILE_UPDATE,
    MIDS_NETWORK_PROFILE_RESET,
    MIDS_NETWORK_PROFILE_UPDATE_ALL,    
    MIDS_NETWORK_PROFILE_INVALID
    
}mmi_java_mids_np_op_type_enum;

typedef enum
{
    JAM_DISPLAY_NONE = 0,
    JAM_DISPLAY_TRUSTED,
    JAM_DISPLAY_UNTRUSTED,
    JAM_DISPLAY_TRUSTED_END
} trusted_title_display_enum;

typedef enum
{
    JAM_DRM_WAIT_RIGHT = 0,
    JAM_DRM_RIGHT_RECIEVED,
    JAM_DRM_NO_RIGHT,
    JAM_DRM_END
}jam_drm_sd_call_result_enum;

typedef enum{
    JAM_UNTRUSTED_DOMAIN = 0,
    JAM_THIRDPARTY_DOMAIN = 1,
    JAM_OPERATOR_DOMAIN = 2,
    JAM_MANUFACTURER_DOMAIN = 3
}jam_domain_id_enum;

/*************************************************************************
 * Java Category start
 *************************************************************************/



typedef void (*mmi_java_filter_hdlr)(void);
extern void mmi_java_category_register_set_filter_CB(mmi_java_filter_hdlr func_ptr);
typedef enum
{
    JAM_CATEGORY_DUMMY = 0,
    /* for operator */
    JAM_CATEGORY_OP01_MAGICBOX = JAM_CATEGORY_DUMMY,    
    JAM_CATEGORY_OP01_GPLUS,        

    /* for general */
    JAM_CATEGORY_GAME = JAM_CATEGORY_DUMMY,    
    JAM_CATEGORY_APPLICATION,        

    JAM_CATEGORY_END

} jam_category_type_enum;

/* highlight midlet index for category  */
#ifdef __MMI_JAVA_CATEGORY_SUPPORT__

extern void jam_set_category_op01_hilighlight_index(kal_int32 index, jam_getlist_filter_type_enum  type, jam_category_type_enum  filter);
extern kal_int32 jam_get_category_op01_hilighlight_index(jam_getlist_filter_type_enum  type, jam_category_type_enum  filter);

#endif
/*************************************************************************
 * Structure Definition
 *************************************************************************/
typedef struct _disk_info_struct_t
{
    char drive_type;
    char serial;
    kal_bool is_mounted;
} disk_info_struct;

/* Get MIDlet Suite/MIDlet List */
typedef struct _mid_icon_struct_t
{
    kal_int32 icon_size;
    kal_int32 icon_width;
    kal_int32 icon_height;
    kal_int32 icon_reserved[2]; /* For MMI format need */
    kal_uint8 *icon_data;
} mid_icon_struct;

typedef struct _mid_struct_t
{
    struct _mid_struct_t *mid_next; /* pointer to next node */

    kal_wchar *mid_name;
    mid_icon_struct mid_icon;
} mid_struct;

typedef struct _mid_info_struct_t
{
    kal_int32 mid_count;
    kal_int32 mid_info_size;
    mid_struct *mid_list;
} mid_info_struct;

typedef struct _mids_list_info_struct_t
{
    struct _mids_list_info_struct_t *mids_list_info_next;   /* pointer to next node */

    kal_int32 mids_info_size;
    kal_uint8 *mids_info_rawdata;   /* pointer to mids info raw data to speed up release */
    kal_wchar *mids_name;
    kal_wchar *mids_root;
    kal_wchar *jad_url;
    kal_wchar *jar_url;
    kal_wchar *webside;
    mid_icon_struct mids_icon;
    mid_info_struct mid_info;
    kal_uint32  category;
    kal_int32 mids_size;
    kal_int32 data_size;    /* 20080813: simfex: add for MIDLET_DATA_SIZE attribute */
    kal_wchar *mids_version;
    kal_wchar *mids_vendor;
    kal_wchar *mids_description;
    kal_bool mids_authorized;
    kal_wchar *mids_authorized_by;
    kal_wchar *mids_auto_start;
} mids_list_info_struct;

typedef struct _mids_listfile_struct_t
{
    kal_int32 mids_count;                   /* Total mids count */
    kal_int32 mids_avail_indx;              /* Available mids on list start index */
    kal_int32 mids_avail_count;             /* Available mids on list count */
    mids_list_info_struct *mids_info_list;  /* Available mids on list */
} mids_listfile_struct;

/* grouped permissions */
typedef struct _mmi_setting_struct_t
{
    kal_char permission_network;
    kal_char permission_push;
    kal_char permission_message;
    kal_char permission_multimedia;
    kal_char permission_data_read;
    kal_char permission_data_write;
    kal_char permission_local_connectivity;
    kal_char permission_location_access;
    kal_char permission_satsa;
    kal_char permission_contactless_communication;
    kal_char permission_reserved;
} mmi_setting_struct;

/* about retrieving WAP X.509 certification */
typedef struct _jam_ca_struct_t
{
    wps_sec_cert_content_struct cert_content;
    wps_sec_rsa_public_key_struct cert_pkey;
    struct _jam_ca_struct_t* next_ca;
} jam_ca_struct;

/* about retrieving WAP X.509 certification */
typedef struct _jam_sim_ca_struct_t
{
    ROOT_PUBLIC_KEY_ENUM certificate_domain;
    kal_uint8 certificate_type;
    kal_uint16 certificate_length;
    kal_uint8 *certificate_data;
    struct _jam_sim_ca_struct_t* next_ca;
} jam_sim_ca_struct;

typedef struct  _jam_getlist_filter_struct_t
{
    jam_getlist_filter_type_enum filter_type;
    kal_wchar *vendor_name;
    kal_int32 disk_name;
    jam_category_type_enum category_type;    
}jam_getlist_filter_struct;

typedef struct _jam_mids_setting_struct_t
{
    kal_char permission_http;
    kal_char permission_https;
    kal_char permission_ssl;
    kal_char permission_tcp;
    kal_char permission_tcp_server;
    kal_char permission_udp;
    kal_char permission_udp_server;
    kal_char permission_rtsp;
    kal_char permission_comm;
    kal_char permission_push;
    kal_char permission_sms_server;
    kal_char permission_sms_send;
    kal_char permission_sms_receive;
    kal_char permission_cbs_server;
    kal_char permission_cbs_receive;
    kal_char permission_mms_server;
    kal_char permission_mms_send;
    kal_char permission_mms_receive;
    kal_char permission_mma_record;
    kal_char permission_mma_snap_shot;
    kal_char permission_file_read;
    kal_char permission_file_write;
    kal_char permission_contact_list_read;
    kal_char permission_contact_list_write;
    kal_char permission_event_list_read;
    kal_char permission_event_list_write;
    kal_char permission_todo_list_read;
    kal_char permission_todo_list_write;
    kal_char permission_content_contenthandler; // 20090413 Dennis
	kal_char permission_location;
	kal_char permission_location_orientation;
	kal_char permission_location_proximityListener;
	kal_char permission_location_landmarkstore_read;
	kal_char permission_location_landmarkstore_write;
	kal_char permission_location_landmarkstore_category;
	kal_char permission_location_landmarkstore_mngr;
    kal_char permission_apdu_aid;
    kal_char permission_jcrmi;
    kal_char permission_apdu_sat;
    kal_char permission_contactless_discovery;
    kal_char permission_contactless_write;
    kal_char permission_ndeftag_open;
    kal_char permission_plaintag_open;
    kal_char permission_isoofffft_open;
    kal_char permission_visualtag_open;   
    /* reserved for the future */
    kal_char permission_obex_client;
    kal_char permission_obex_server;
    kal_char permission_obex_client_tcp;
    kal_char permission_obex_servet_tcp;
    kal_char permission_bt_client;
    kal_char permission_bt_server;
    
} jam_mids_setting_struct;


typedef struct _java_filengr_info_struct_t
{
    kal_wchar mids_name[60];   //[Name]  java app package name
    kal_wchar mids_size[16]; //[Size]
    kal_wchar mids_version[10]; //[Version] java app version
    kal_wchar mids_vendor[50]; //[Vendor] java app vendor
    kal_wchar mids_description[100]; //[Description] java app description
    //kal_wchar *mids_website; //[Website] java app download website
    //kal_bool mids_authorized; //[Connections] connections URL
    //kal_wchar* media_price;
    void* user_data;
} java_filengr_info_struct;

/************************************************************************
  * Java network profile start
  ************************************************************************/
#define JAM_NW_MAX_NAME_LEN  41
#define JAVA_NW_WIFI_PROFILE_NUM 6
#define JAVA_NW_PROFILE_USER_NAME_LEN 31
#define JAVA_NW_PROFILE_PW_LEN 31

typedef struct _jam_mids_network_struct_t
{
    kal_uint32 CRC;
    kal_uint32 account_id;	// encoded app_id 
    kal_bool Use_default;
}jam_mids_network_struct;


typedef enum
{
    NW_OP_NO_ERR = 0,
    NW_OP_ERR_FILE_NOTFOUND = 1,
    NW_OP_ERR_FILE_READ_FAIL = 2,    
    NW_OP_ERR_FILE_WRITE_FAIL = 4,        
    NW_OP_ERR_FILE_DEL_FAIL = 8,        
    NW_OP_ERR_FILE_INCORRECT_FORMAT = 16,
    NW_OP_ERR_FILE_INCORRECT_PARAM = 32,    
    NW_OP_ERR_INCORRECT_RET = 64,        
    NW_OP_ERR_BUSY = 128
    
}jam_nw_op_error_code_enum;


typedef enum
{
    NW_SIM_ID_DEFAULT = 0,
    NW_SIM_ID_SIM1 = 0X1,
    NW_SIM_ID_SIM2 = 0X2,
    NW_SIM_ID_SIM3 = 0X4,
    NW_SIM_ID_SIM4 = 0X8,
    NW_DUMMY_TYPE
}jam_nw_connection_type;

typedef enum
{
    INTEGER0_TO_BIT,
    BIT_TO_INTEGER0,
    INTEGER1_TO_BIT,
    BIT_TO_INTEGER1
}jam_sim_trans_type;

typedef enum
{
    JAM_GET_CA_READY,
    JAM_GET_CA_RUNNING,
    JAM_GET_CA_COMPLETED,
    JAM_GET_CA_OUT_OF_MEM
}jam_get_cert_status;
/************************************************************************
  * Java network profile end
  ************************************************************************/  

typedef struct _jam_call_back_function_struct_t
{
    void (*jam_runtime_memory_initialize)(long *runtime_pool, int size);
    void (*jam_runtime_memory_finalize)(void);
	void (*jam_asm_memory_initialize)(long *asm_pool, int size);
    void (*jam_asm_memory_finalize)(void);
    kal_bool (*jam_check_and_gen_sys_file)(kal_bool force_get_all);
    kal_int32(*jam_get_list) ( kal_int32 list_start_indx, kal_int32 list_count,
                              mids_listfile_struct **mids_listfile_ptr, jam_getlist_filter_struct *filter);
    void (*jam_free_list) (void);
    /* jam_start_up is call by JAM task,jam_start_up_internal is call by JVM task */
    kal_int32(*jam_start_up) ( kal_int32 mids_id, kal_int32 mid_id,kal_int32 vm_id);
    kal_int32(*jam_start_up_internal) ( kal_int32 mids_id, kal_int32 mid_id,kal_int32 vm_id);
    void (*jam_tck_start_up) (java_mode_enum tck_mode, kal_bool to_execute, kal_int32 vm_id);
    void (*jam_tck_start_up_internal) (java_mode_enum tck_mode, kal_bool to_execute, kal_int32 vm_id);
   
    kal_int32(*jam_get_setting) ( mmi_setting_struct *get_setting, mmi_setting_struct *max_setting,
                                   kal_int32 mids_id, kal_wchar* storage_name, kal_bool *is_trused);
    kal_int32(*jam_set_setting) ( mmi_setting_struct *set_setting, kal_int32 mids_id,
                                   mids_list_info_struct *mids_info_ptr,kal_bool user_update);
    void (*jam_remove_midlet_suite) ( kal_int32 mids_id, kal_int32 *error_code);
    void (*jam_update_midlet_suite) ( kal_int32 mids_id);
    void (*jam_install_midlet_suite) ( kal_wchar *jad_file_path, kal_wchar *jar_file_path, kal_wchar *download_url);
    kal_int32(*jam_get_avail_storage) (void);
    kal_int32(*jam_get_total_storage) (void);
    kal_int32(*jam_get_event_abort_handler) (void);
    kal_int32(*jam_get_mids_id_from_storage_name) (kal_char *mids_storage_name);
    kal_int32(*jam_get_mids_id_from_push_name) (kal_char *mids_push_name);
    kal_char*(*jam_get_dm_id_from_mids_root) (kal_wchar *mids_root);
    kal_wchar *(*jam_get_jar_storage_name_from_mids_id) (void *(*malloc) (int size), kal_int32 MIDS_id);
    kal_wchar *(*jam_get_jad_storage_name_from_mids_id) (void *(*malloc) (int size), kal_int32 MIDS_id);
    kal_wchar *(*jam_get_jar_path_from_storage_name) (void *(*malloc) (int size), kal_char* storage_name);
    kal_wchar *(*jam_get_jad_path_from_storage_name) (void *(*malloc) (int size), kal_char* storage_name);

    kal_bool(*jam_init) (void);
#ifdef OGDR_SECURITY_SETTING
    kal_int32 (*jam_get_domain_list)(kal_int32* total_domain, kal_wchar domains[DOMAIN_MAX_COUNT][DOMAIN_MAX_LEN]);
    kal_int32 (*jam_get_default_setting)(kal_int32 domain_id, mmi_setting_struct* max_setting, mmi_setting_struct* default_setting);
    kal_int32 (*jam_set_default_setting)(kal_int32 domain_id, mmi_setting_struct* default_setting);
    kal_int32 (*jam_reset_default_permission_setting)(void);
    kal_int32 (*jam_set_domain_status)(kal_uint32 total_domain, kal_bool on[DOMAIN_MAX_COUNT]);
    void (*jam_get_domain_status)(kal_uint32* total_count, kal_bool domains_status[DOMAIN_MAX_COUNT], kal_wchar *domain_name[DOMAIN_MAX_COUNT]);    
    kal_int32 (*jam_mids_get_default_setting)(jam_mids_setting_struct *get_setting_ptr, kal_int32 mids_id, mids_list_info_struct *mids_info_ptr);    
    kal_int32 (*jam_restore_setting)(jam_mids_setting_struct *set_setting_ptr, kal_char* storage_name, mids_list_info_struct *mids_info_ptr);
#endif
    void (*jam_restore_default_game) ( kal_uint32 mids_id);
    void (*jam_restore_all_default_games) (void);
    kal_int32 (*jam_general_assist)(kal_int32 index, kal_char *input, kal_int32 input_len);
    kal_bool (*jam_verify_jar) ( kal_wchar* jad_path, kal_wchar* jar_path);
    kal_int32 (*jam_get_mids_app_property) ( kal_char* mids_storage_name,kal_int32 type,kal_char* propertyname, kal_wchar* buffer, kal_int32 buf_size);
    kal_int32 (*jam_get_running_midlet_domain)(kal_char * storage_name);
} jam_call_back_function_struct;

/*************************************************************************
 * Global Declaration
 *************************************************************************/
extern int jam_activate_wap_browser(char *url);
extern int jam_make_call(char *number);
extern int jam_activate_rtsp_player(char *url);

extern disk_info_struct disk_info[25];
extern kal_bool disk_changed;
extern kal_bool g_jam_allowed_sending_abort_from_idle;


extern jam_call_back_function_struct jam_call_back_functions;
/* this veriable is used to check if it's in removing state */
extern kal_bool g_jam_in_remove_state;

/* this function must be inplemented in VM */
extern void jam_adp_call_back_init(jam_call_back_function_struct *call_back);
extern kal_int32 jvm_get_avail_storage(void);
extern kal_int32 jvm_get_total_storage(void);
extern kal_bool jam_install_user_confirm(kal_wchar *confirmMsg);
extern kal_bool jam_install_get_rms_confirm(kal_int32 *error_code);
extern void jam_update_confirm(kal_int32 error_code);
extern void jam_install_confirm(kal_int32 error_code);
extern kal_int32 jam_get_install_max_midlet_num(void);
extern kal_int32 jam_get_install_max_mids_num(void);
extern kal_int32 jam_get_install_icon_max_width(void);
extern kal_int32 jam_get_install_icon_max_height(void);
extern kal_wchar* jam_construct_install_icon_path(kal_char* storage_name, kal_char installed_drv);
extern char *jam_get_custpack_domain_name(int domain);
extern kal_bool jam_is_need_malloc_temp(void);
extern kal_int32 jam_file_save_status(kal_int32 download_error_code, kal_int32 downloadSize);
extern kal_int32 jam_post_result(kal_char *utf8_massage, kal_int32 size, kal_wchar *ucs2_url, kal_wchar *savePath);
extern void jam_get_permission_req(
                kal_int32 permission_display_id,
                kal_int32 *permission_dialog_selected_item,
                trusted_title_display_enum trusted_title_display, 
                kal_wchar *appendix);
extern kal_int32 clean_event(void);
extern void jam_download_progess(kal_int32 total_size, kal_int32 current_size, kal_wchar* midlet_name, kal_int32 name_len);
extern void jam_install_progress(kal_int32 progress, kal_uint16* suiteName);
extern kal_int32 jam_drm_decode_file(kal_wchar *file_name, kal_bool force_encoded_as_dcf);
extern kal_int32 jam_drm_copy_to_receive(kal_wchar *midlet_name, kal_wchar* source_path);
extern kal_int32 encrypt_jar_file(kal_wchar* jar_file, kal_int32* jar_size);
extern kal_wchar* jam_get_mms_attachment(kal_wchar * file_name, kal_bool *abort_received);
extern void jam_set_running_mid_name(kal_wchar *mid_name_str);

extern kal_int32 jam_request_http_and_save_to_file(kal_int32 total_jar_size, kal_wchar* url, kal_wchar* file_name, 
                    kal_wchar* midlet_name, kal_int32 name_len, kal_int32 checkJAR);
extern kal_int32 jam_request_http_post(kal_wchar *url, kal_char *post_message, kal_int32 *server_response_code, kal_bool first_time);
extern kal_int32 jam_get_install_drv(kal_int32 requestSize);
extern kal_char jam_get_preinstall_drv(void);
extern kal_int32 jam_get_install_category(void);

extern kal_bool endKeyPressed;

extern kal_uint8* jam_get_user_agent(void);
extern jam_ca_struct* get_jam_ca_list(void);
extern jam_get_cert_status ca_list_ready(void);
extern kal_char* get_ca_domain(void);
extern jam_sim_ca_struct* get_sim_ca_list(void);
extern jam_get_cert_status sim_ca_list_ready(void);
extern void jam_get_ca_from_sim(void);


extern kal_char *jam_get_running_storage_name(void);
extern kal_bool jam_set_engineer_mode_memory(int size);
extern kal_bool g_jam_remove_install_file;


/* This API is used when J2ME task invoking jbt_finalize. */
#ifdef __SUPPORT_JBT__
extern void jbt_finalize_for_jvm(void);
#endif

/* this two function is the sample for start up vm */
extern void jam_jvm_send_shutdown_all_notify(kal_int32 error_code);
extern void jam_jvm_send_mid_start_req(kal_int32 mids_id, kal_int32 mid_id, kal_int32 vm_id);
extern void jam_jvm_send_mid_stop_req(kal_uint32 returnCode, kal_int32 vm_id);
extern void jam_jvm_send_tck_start_req(java_mode_enum tck_mode, kal_bool to_execute,kal_int32 vm_id);
extern void jam_jvm_send_tck_stop_req(kal_int32 returnCode, kal_int32 vm_id);
extern kal_char* jam_parse_header_value(kal_char *input, kal_int32 input_size, kal_char* key);
extern void jam_jvm_send_general_assist_req(kal_int32 index, kal_char* input, kal_int32 input_len);
/*************************************************************************
 * DRM API
 *************************************************************************/
extern kal_bool jam_drm_is_drm_file(kal_wchar *storage_name);
extern kal_bool jam_drm_check_right(kal_wchar *storage_name, kal_uint8 permission);
extern kal_int32 jam_mvm_vm_drm_init(kal_int32 vm_id);
extern kal_int32 jam_mvm_vm_drm_deinit(kal_int32 vm_id);
extern kal_int32 jam_drm_start_consume(kal_wchar *storage_name, kal_uint8 permission, void (*callback)(kal_int32 result, kal_int32 id));
extern kal_int32 jam_drm_stop_consume(kal_int32 consume_id);
extern kal_int32 jam_drm_pause_consume(kal_int32 consume_id);
extern kal_int32 jam_drm_resume_consume(kal_int32 consume_id);
extern kal_int32 jam_drm_midlet_start_consume(kal_wchar *storage_name,kal_int32 * error_code);
extern kal_int32 jam_drm_midlet_stop_consume(kal_int32 drm_id);
extern kal_int32 jam_drm_midlet_pause_consume(kal_int32 consume_id);
extern kal_int32 jam_drm_midlet_resume_consume(kal_int32 consume_id);
extern void jam_drm_get_content_ext(kal_wchar *storage_name, kal_wchar *ext);
extern kal_bool jam_drm_recv_right_handler(void *para, kal_uint8 type);
extern kal_int32 jam_drm_register_SD_callback(kal_wchar *temp_jad_file_name, kal_wchar *temp_jar_file_name, kal_wchar *jad_url, kal_wchar *jar_url);
extern kal_bool jam_drm_check_content_type(kal_wchar* file_name);
extern kal_bool jam_drm_can_be_send(kal_int32 mids_id);
/*************************************************************************
 * SIM CA
 *************************************************************************/
extern kal_char* get_sim_ca_domain(ROOT_PUBLIC_KEY_ENUM domain);

/*************************************************************************
 * Jam_msg_handler
 *************************************************************************/
extern kal_uint32 java_total_used_space;
extern mids_listfile_struct *saved_mids_listfile_ptr;
/*************************************************************************
 *  Java network
 *************************************************************************/
extern void jam_create_mids_nw_setting(char* storage_name, char* preferred_con_profile, int* error_code);
extern kal_uint32 jam_nw_create_setting(kal_char *mids_storage, jam_mids_network_struct* setting_ptr, kal_char* preferred_con_profile,kal_int32 index);
extern kal_uint32 jam_nw_delete_setting(kal_char *mids_storage);
extern kal_uint32 jam_nw_get_setting(kal_char *mids_storage, jam_mids_network_struct* setting_ptr);
extern kal_uint32 jam_nw_set_setting(kal_char *mids_storage, jam_mids_network_struct* setting_ptr);
extern kal_bool jam_nw_init_setting(jam_mids_network_struct* setting_ptr,kal_int32 sim_id);
extern kal_uint32 jam_nw_mids_get_connection(kal_char *mids_storage, jam_mids_network_struct* connection_ptr);
extern kal_uint8 jam_nw_mids_set_bearer(jam_mids_network_struct* network, kal_int32 vm_id);
extern kal_uint8 jam_nw_mids_set_bearer_content(kal_uint32 account_id,kal_bool is_bearer_fallback,kal_int32 vm_id);
extern kal_bool jam_nw_update_network_setting(void);

extern kal_uint32 jam_nw_tck_get_connection(jam_mids_network_struct* connection_ptr);
kal_uint8 jam_nw_get_sim_id(kal_char *mids_storage);
extern kal_bool jam_nw_get_proxy_for_install(kal_bool *is_success);
extern void jam_nw_update_dtcnt_ind_handler(ilm_struct *ilm_ptr);
extern void jam_nw_delete_dtcnt_ind_handler(ilm_struct *ilm_ptr);
extern void jam_nw_adp_sim_id(kal_uint8* sim_id,jam_sim_trans_type type);


#if defined(__MVM__)
#define JAM_SETTING_FILE_EXT_NAME                       ".bin"
#else
#define JAM_SETTING_FILE_EXT_NAME                       "settings.bin"
#endif /* __MVM__ */
#define JAM_MIDS_LIST_FILE                      "MIDSList.save"

/*****************************************************************************
 * FUNCTION
 *  TRANS_INT
 * DESCRIPTION
 *  
 * PARAMETERS
 *  a       [?]     
 * RETURNS
 *  
 *****************************************************************************/
__inline kal_int32 TRANS_INT(kal_wchar *a)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    kal_uint8 *_temp = (kal_uint8*) (a);

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    return ((_temp[0] << 24) + (_temp[1] << 16) + (_temp[2] << 8) + _temp[3]);
}


/*****************************************************************************
 * FUNCTION
 *  TRANS_SHORT
 * DESCRIPTION
 *  
 * PARAMETERS
 *  a       [?]     
 * RETURNS
 *  
 *****************************************************************************/
__inline kal_int16 TRANS_SHORT(kal_wchar *a)
{
    /*----------------------------------------------------------------*/
    /* Local Variables                                                */
    /*----------------------------------------------------------------*/
    kal_uint8 *_temp = (kal_uint8*) (a);

    /*----------------------------------------------------------------*/
    /* Code Body                                                      */
    /*----------------------------------------------------------------*/
    return ((_temp[0] << 8) + _temp[1]);
}
#define TRANS_INTVALUE(a)  \
   ((((a)&0xFF)<<24) + (((a>>8)&0xFF)<<16) + (((a>>16)&0xFF)<<8) + (((a>>24)&0xFF)))
   
typedef struct _mmi_java_timealarm_push_res_struct_t
{
    LOCAL_PARA_HDR 
    kal_uint32 session_id;
    kal_uint32 pushalarm_type;  /* For simplicity, 0 - timealarm, 1 - sms push */
    void *callback_entry;
    kal_char *mids_storage_name;
    kal_char *mid_class_name;
    kal_int32 mid_id;
    kal_uint32 mids_permission;
    kal_bool execute;
    kal_uint8 wap_prof_id;
} mmi_java_timealarm_push_res_struct;

typedef struct _install_update_struct_t
{
    /* this veriable is used to check if the install or update is terminated by receiving abort */
    kal_bool is_aborted;
    /* sending MSG_ID_MMI_JAVA_ABORT_CNF to MMI will cause popping up a "aborted" dialog, 
       we have to check if it is in intall or update stage and "aborted" dialog can be popped up */
    kal_bool can_be_aborted;
    /* use this variable to make sure the install is an update */
    kal_bool is_update;
    /* this veriable will be true if the installation has been terminated and is not caused by abort but 
       needs to use storage recovery module to clean disk */
    kal_bool need_to_clean;
    /* used to make sure the confirm message of install or update has been sent */
    kal_bool has_returned_res;
    /* save the return code from jam_java_native_msg_handler.c */
    kal_int32 local_install_return_code;
    /* used by local intall module to check if the install is by force */
    kal_bool is_force_local_install;
    /* used to check the install is a local install */
    kal_bool is_local_install;
    /* installed by WAP */
    kal_bool is_normal_install;
    /* the installation is canceled by the user */
    kal_bool install_cancelled;
} install_update_struct;

typedef struct _install_report_info_struct_t
{
    /*indicate the launch mids id after installation*/
    kal_int32  install_mids_id;
    /*if install successfully, then return mids storage id*/
    kal_char* install_mids_storage_id;
    /*if install successfully, then return mids name*/
    kal_wchar* install_mids_name;
    /*if install successfully, then return mids vendor*/
    kal_wchar* install_mids_vendor;
    /*if install successfully, then return mids version*/
    kal_char* install_mids_version;
    kal_char  install_drv;
} install_report_info_struct;

extern kal_bool g_jam_is_local_installed_mids;
extern void jam_gen_jal_sys_file(void);
extern install_update_struct install_update_status; 
extern kal_bool is_in_critical_path;
extern install_report_info_struct g_jam_install_report;
extern kal_bool terminated_by_user_cancel;

extern void jam_set_get_jar_url_check_exist(kal_bool setting);
extern kal_wchar *get_jar_url(kal_wchar *jad_file_name, kal_int32 *error_code); 
extern kal_wchar *jam_get_mids_name(kal_wchar *jad_file_name, kal_int32 length_limit);

/* screen switch */
extern kal_bool g_jam_allowed_sending_abort_from_idle;
extern kal_int32 jam_mvm_get_vm_state(kal_int32 vm_id); 
#define jam_parse_midslistfile (jam_call_back_functions.jam_get_list)

/*network profile */
extern void jam_hs_np_delete_notifier(kal_char *mids_storage);
/* lauch after install */
extern kal_int32 g_jam_need_lauch;
extern kal_int32 g_jam_install_mids_id;
extern kal_bool jam_is_java_running(void);
extern kal_bool msg_send5(module_type _src_mod_id, module_type _dest_mod_id, sap_type _sap_id, msg_type _msg_id, local_para_struct *_local_para_ptr);
extern void mmi_java_send_message_from_active_mod( kal_int32 dst_id, kal_int32 sap_id, kal_int32 msg_id, void *local_para_ptr );
#define java_send_msg_from_active_mod(dst_id, sap_id,  msg_id, local_para_ptr) mmi_java_send_message_from_active_mod( dst_id,  sap_id,  msg_id, (void *)local_para_ptr)
#define java_send_msg(src_id, dst_id, sap_id, msg_id, local_para_ptr) msg_send5(src_id, dst_id, sap_id, msg_id, (void *)local_para_ptr)
#include "jam_msg_util.h" 
#define NW_SETIING   "_nw1.bin"
#define NW_SETIING2   "_nw2.bin"
#define NW_SETIING3   "_nw3.bin"
#define NW_SETIING4   "_nw4.bin"
#endif /* JAL_JAM_INTERFACE_H */ 
