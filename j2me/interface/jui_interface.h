/*****************************************************************************
*  Copyright Statement:
*  --------------------
*  This software is protected by Copyright and the information contained
*  herein is confidential. The software may not be copied and the information
*  contained herein may not be used or disclosed except with the written
*  permission of MediaTek Inc. (C) 2005
*
*  BY OPENING THIS FILE, BUYER HEREBY UNEQUIVOCALLY ACKNOWLEDGES AND AGREES
*  THAT THE SOFTWARE/FIRMWARE AND ITS DOCUMENTATIONS ("MEDIATEK SOFTWARE")
*  RECEIVED FROM MEDIATEK AND/OR ITS REPRESENTATIVES ARE PROVIDED TO BUYER ON
*  AN "AS-IS" BASIS ONLY. MEDIATEK EXPRESSLY DISCLAIMS ANY AND ALL WARRANTIES,
*  EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE IMPLIED WARRANTIES OF
*  MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE OR NONINFRINGEMENT.
*  NEITHER DOES MEDIATEK PROVIDE ANY WARRANTY WHATSOEVER WITH RESPECT TO THE
*  SOFTWARE OF ANY THIRD PARTY WHICH MAY BE USED BY, INCORPORATED IN, OR
*  SUPPLIED WITH THE MEDIATEK SOFTWARE, AND BUYER AGREES TO LOOK ONLY TO SUCH
*  THIRD PARTY FOR ANY WARRANTY CLAIM RELATING THERETO. MEDIATEK SHALL ALSO
*  NOT BE RESPONSIBLE FOR ANY MEDIATEK SOFTWARE RELEASES MADE TO BUYER'S
*  SPECIFICATION OR TO CONFORM TO A PARTICULAR STANDARD OR OPEN FORUM.
*
*  BUYER'S SOLE AND EXCLUSIVE REMEDY AND MEDIATEK'S ENTIRE AND CUMULATIVE
*  LIABILITY WITH RESPECT TO THE MEDIATEK SOFTWARE RELEASED HEREUNDER WILL BE,
*  AT MEDIATEK'S OPTION, TO REVISE OR REPLACE THE MEDIATEK SOFTWARE AT ISSUE,
*  OR REFUND ANY SOFTWARE LICENSE FEES OR SERVICE CHARGE PAID BY BUYER TO
*  MEDIATEK FOR SUCH MEDIATEK SOFTWARE AT ISSUE. 
*
*  THE TRANSACTION CONTEMPLATED HEREUNDER SHALL BE CONSTRUED IN ACCORDANCE
*  WITH THE LAWS OF THE STATE OF CALIFORNIA, USA, EXCLUDING ITS CONFLICT OF
*  LAWS PRINCIPLES.  ANY DISPUTES, CONTROVERSIES OR CLAIMS ARISING THEREOF AND
*  RELATED THERETO SHALL BE SETTLED BY ARBITRATION IN SAN FRANCISCO, CA, UNDER
*  THE RULES OF THE INTERNATIONAL CHAMBER OF COMMERCE (ICC).
*
*****************************************************************************/

/*******************************************************************************
 * Filename:
 * ---------
 *  jui_interface.h
 *
 * Project:
 * --------
 *  MAUI
 *
 * Description:
 * ------------
 *  
 *
 * Author:
 * -------
 * -------
 *
 *==============================================================================
 *             HISTORY
 * Below this line, this part is controlled by PVCS VM. DO NOT MODIFY!! 
 *------------------------------------------------------------------------------
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 * removed!
 *
 *------------------------------------------------------------------------------
 * Upper this line, this part is controlled by PVCS VM. DO NOT MODIFY!! 
 *==============================================================================
 *******************************************************************************/

#ifndef _JUI_INTERFACE_H
#define _JUI_INTERFACE_H

#include "jam_mvm_manager.h"

#include "kal_trace.h"
/*************************************************************************
 * Global Definition
 *************************************************************************/
#define ENABLE_JUI_CACHE_FONT
//#ifdef __MMI_VECTOR_FONT_SUPPORT__
//#define __SUPPORT_VECTOR_FONT_SCREEN_MEMORY__   //support screen memory may caused video can't run
//#endif /* __MMI_VECTOR_FONT_SUPPORT__ */

#define __SUPPORT_FONT_MEMORY_FROM_SCREEN_MEMORY__

#if defined(J2ME_SUPPORT_BACKGROUND) && !defined(J2ME_SLIM_MEMORY_SUPPORT)
#define SUPPORT_CACHED_FONT_ALWAYS
#endif


#if defined(__SUPPORT_JAVA_VIRTUAL_KEYPAD__)
#define SUPPORT_JUI_VIRTUAL_KEYPAD_ENHANCEMENT
#ifndef __SUPPORT_JAVA_COSMOS_REDUCE_VIRTUAL_KEYPAD__
#if defined(__MMI_MAINLCD_320X480__)
#define JUI_VIRTUAL_KEYPAD_HEIGHT (103)
#define JUI_VIRTUAL_KEYPAD_ROW_SPACING (4)
#define JUI_VIRTUAL_KEYPAD_COL_SPACING (2)
#define JUI_VIRTUAL_KEYPAD_HORIZONTAL_INDENT (1)
#define JUI_VIRTUAL_KEYPAD_VERTICAL_INDENT (7)
#define JUI_VIRTUAL_KEYPAD_KEY_HEIGHT (44)
#define JUI_VIRTUAL_KEYPAD_KEY_BOTTOM_SHADOW_HEIGHT (2)
#define JUI_VIRTUAL_KEYPAD_NUM_KEY_WIDTH (30)
#define JUI_VIRTUAL_KEYPAD_ARROW_KEY_WIDTH (62)
#define JUI_VIRTUAL_KEYPAD_SOFTKEY_WIDTH (126)
#define JUI_VIRTUAL_KEYPAD_OK_CHAR_SIZE (20)
#define JUI_VIRTUAL_KEYPAD_NUM_CHAR_SIZE (22)
#define JUI_VIRTUAL_KEYPAD_CHAR_1_OFFSET (2)
#endif /* __MMI_MAINLCD_320X480__ */

#if defined(__MMI_MAINLCD_480X800__)
#define JUI_VIRTUAL_KEYPAD_HEIGHT (173)
#define JUI_VIRTUAL_KEYPAD_ROW_SPACING (8)
#define JUI_VIRTUAL_KEYPAD_COL_SPACING (4)
#define JUI_VIRTUAL_KEYPAD_HORIZONTAL_INDENT (2)
#define JUI_VIRTUAL_KEYPAD_VERTICAL_INDENT (11)
#define JUI_VIRTUAL_KEYPAD_KEY_HEIGHT (73)
#define JUI_VIRTUAL_KEYPAD_KEY_BOTTOM_SHADOW_HEIGHT (2)
#define JUI_VIRTUAL_KEYPAD_NUM_KEY_WIDTH (44)
#define JUI_VIRTUAL_KEYPAD_ARROW_KEY_WIDTH (92)
#define JUI_VIRTUAL_KEYPAD_SOFTKEY_WIDTH (188)
#define JUI_VIRTUAL_KEYPAD_OK_CHAR_SIZE (36)
#define JUI_VIRTUAL_KEYPAD_NUM_CHAR_SIZE (38)
#define JUI_VIRTUAL_KEYPAD_CHAR_1_OFFSET (3)
#endif /* __MMI_MAINLCD_480X800__ */

#if defined(__MMI_MAINLCD_240X320__) || defined(__MMI_MAINLCD_240X400__)
#define JUI_VIRTUAL_KEYPAD_HEIGHT (86)
#define JUI_VIRTUAL_KEYPAD_ROW_SPACING (2)
#define JUI_VIRTUAL_KEYPAD_COL_SPACING (2)
#define JUI_VIRTUAL_KEYPAD_HORIZONTAL_INDENT (1)
#define JUI_VIRTUAL_KEYPAD_VERTICAL_INDENT (5)
#define JUI_VIRTUAL_KEYPAD_KEY_HEIGHT (38)
#define JUI_VIRTUAL_KEYPAD_KEY_BOTTOM_SHADOW_HEIGHT (2)
#define JUI_VIRTUAL_KEYPAD_NUM_KEY_WIDTH (22)
#define JUI_VIRTUAL_KEYPAD_ARROW_KEY_WIDTH (46)
#define JUI_VIRTUAL_KEYPAD_SOFTKEY_WIDTH (94)
#define JUI_VIRTUAL_KEYPAD_OK_CHAR_SIZE (18)
#define JUI_VIRTUAL_KEYPAD_NUM_CHAR_SIZE (18)
#define JUI_VIRTUAL_KEYPAD_CHAR_1_OFFSET (1)
#endif /* __MMI_MAINLCD_240X320__ */
#else  /*__SUPPORT_JAVA_COSMOS_REDUCE_VIRTUAL_KEYPAD__*/
#if defined(__MMI_MAINLCD_320X480__)
#define JUI_VIRTUAL_KEYPAD_HEIGHT (54)
#define JUI_VIRTUAL_KEYPAD_COL_SPACING (2)
#define JUI_VIRTUAL_KEYPAD_HORIZONTAL_INDENT (3)
#define JUI_VIRTUAL_KEYPAD_VERTICAL_INDENT (6)
#define JUI_VIRTUAL_KEYPAD_KEY_HEIGHT (44)
#define JUI_VIRTUAL_KEYPAD_KEY_BOTTOM_SHADOW_HEIGHT (2)
#define JUI_VIRTUAL_KEYPAD_SOFTKEY_WIDTH (156)
#endif /* __MMI_MAINLCD_320X480__ */

#if defined(__MMI_MAINLCD_480X800__)
#define JUI_VIRTUAL_KEYPAD_HEIGHT (94)
#define JUI_VIRTUAL_KEYPAD_COL_SPACING (6)
#define JUI_VIRTUAL_KEYPAD_HORIZONTAL_INDENT (5)
#define JUI_VIRTUAL_KEYPAD_VERTICAL_INDENT (14)
#define JUI_VIRTUAL_KEYPAD_KEY_HEIGHT (73)
#define JUI_VIRTUAL_KEYPAD_KEY_BOTTOM_SHADOW_HEIGHT (2)
#define JUI_VIRTUAL_KEYPAD_SOFTKEY_WIDTH (232)
#endif /* __MMI_MAINLCD_480X800__ */

#if defined(__MMI_MAINLCD_240X320__) || defined(__MMI_MAINLCD_240X400__)
#define JUI_VIRTUAL_KEYPAD_HEIGHT (47)
#define JUI_VIRTUAL_KEYPAD_COL_SPACING (2)
#define JUI_VIRTUAL_KEYPAD_HORIZONTAL_INDENT (3)
#define JUI_VIRTUAL_KEYPAD_VERTICAL_INDENT (7)
#define JUI_VIRTUAL_KEYPAD_KEY_HEIGHT (38)
#define JUI_VIRTUAL_KEYPAD_KEY_BOTTOM_SHADOW_HEIGHT (2)
#define JUI_VIRTUAL_KEYPAD_SOFTKEY_WIDTH (116)
#endif /* __MMI_MAINLCD_240X320__ */
#endif /*__SUPPORT_JAVA_COSMOS_REDUCE_VIRTUAL_KEYPAD__*/
#endif /* __SUPPORT_JAVA_VIRTUAL_KEYPAD__ */

#define GIFdecodeImage jui_decode_gif_image
#define JPEGdecodeImage jui_decode_jpeg_image

#define JUI_MAX_SOFTKEYS            2   /* JUI MVM */
#define JUI_SOFTKEY_STR_BUF         32  /* JUI MVM */
#define JUI_MVM_SUPPORT_VM_NUM      MAX_VM_INSTANCE_NUM /* JUI MVM */
#define JUI_MAX_TITLE_LENGTH        64
#define JUI_MAX_TICKER_LENGTH       64
#define JUI_MAX_COMMAND_LABLE_LENGTH    32
#define JUI_MAX_COMMAND_SUPPORT         25 /* only suppurt 25 commands */

#define JUI_MAX_BUFFER_SUPPORT      1024

#define JUI_EVENT_OPTION_MENU_CANCEL    (-2)

typedef enum JAL_INPUT_TYPE_ENUM
{
    JUI_INPUT_TYPE_ANY,
    JUI_INPUT_TYPE_ANY_PASSWORD,
    JUI_INPUT_TYPE_NUMERIC,
    JUI_INPUT_TYPE_NUMERIC_PASSWORD,
    JUI_INPUT_TYPE_PHONE_NUMBER,
    JUI_INPUT_TYPE_PHONE_NUMBER_PASSWORD,
    JUI_INPUT_TYPE_DECIMAL_NUMERIC,
    JUI_INPUT_TYPE_DECIMAL_NUMERIC_PASSWORD,
    JUI_INPUT_TYPE_EMAIL,
    JUI_INPUT_TYPE_EMAIL_PASSWORD,
    JUI_INPUT_TYPE_URL,
    JUI_INPUT_TYPE_URL_PASSWORD,
    JUI_INPUT_TYPE_ALPHANUMERIC_LOWERCASE,
    JUI_INPUT_TYPE_ALPHANUMERIC_PASSWORD,
    JUI_INPUT_TYPE_UNEDIABLE,

    JUI_INPUT_TYPE_END
} jui_ime_enum;

typedef enum JUI_SCREEN_MODE_ENUM
{
    JUI_SCREEN_MODE_NORMAL,
    JUI_SCREEN_MODE_FULL,
    JUI_SCREEN_MODE_END
} jui_screen_mode_enum;

typedef enum JUI_SOFTKEY_TYPE_ENUM
{
    JUI_LEFT_SOFTKEY,
    JUI_RIGHT_SOFTKEY,
    JUI_CENTER_SOFTKEY,
    JUI_SOFTKEY_TOTAL
} jui_softkey_enum;

typedef enum JUI_EVENT_TYPE_ENUM
{
    JUI_EVENT_REPAINT,
    JUI_EVENT_REPAINT_TEXTBOX,
    JUI_EVENT_REPAINT_STATUS_BAR,//20110228 : added for repaint status bar
    JUI_EVENT_RUN_COMMAND,
    JUI_EVENT_TITLE_CHANGED,
    JUI_EVENT_TICKER_CHANGED,
    JUI_EVENT_SCREEN_MODE_CHANGED,
    JUI_EVENT_TERMINATE_JAVA,

    JUI_EVENT_VM_INIT,
    JUI_EVENT_VM_PAUSE,
    JUI_EVENT_VM_RESUME,
    JUI_EVENT_VM_RESET,
    JUI_EVENT_VM_STOP,
    JUI_EVENT_VM_ACTIVE_NOTIFY, //notify some events need vm to process,and make sure vm don't sleep

    JUI_EVENT_LCD_VISIBLE,
    JUI_EVENT_LCD_UNVISIBLE,

    JUI_EVENT_SCREEN_ROTATE,
    JUI_EVENT_REPAINT_ALL,

    JUI_EVENT_TOTAL
} jui_event_type_enum;

typedef enum JUI_SCREEN_TYPE_ENUM
{
    JUI_SCREEN_TYPE_UNKNOWN,
    JUI_SCREEN_TYPE_CANVAS,
    JUI_SCREEN_TYPE_LIST,
    JUI_SCREEN_TYPE_FORM,
    JUI_SCREEN_TYPE_ALERT,
    JUI_SCREEN_TYPE_TEXTBOX,
    JUI_SCREEN_TYPE_OTHERS,

    JUI_SCREEN_TYPE_TOTAL
} jui_screen_type_enum;

typedef enum JUI_FONT_LANG_TYPE_ENUM
{
    JUI_FONT_LANG_TYPE_ENG = 0,      //English
    JUI_FONT_LANG_TYPE_SM_CHINESE,   //Simplified Chinse
    JUI_FONT_LANG_TYPE_HK_CHINESE,   //Traditional Chinese
    JUI_FONT_LANG_TYPE_TR_CHINESE,   //Traditional Chinese

    JUI_FONT_TYPE_TOTAL
}jui_font_lang_type_enum;

typedef enum JUI_FONT_SIZE_ENUM
{
    JUI_FONT_SIZE_LARGE,
    JUI_FONT_SIZE_MEDIUM,
    JUI_FONT_SIZE_SMALL,

    JUI_FONT_SIZE_TOTAL
}jui_font_size_enum;

typedef struct _jui_widget_event_listener_void_void_struct
{
    jui_event_type_enum event_type;
    void (*listener) (void);
    struct _jui_widget_event_listener_void_void_struct *next;

} jui_widget_event_listener_void_void_struct;

typedef struct _jui_widget_event_listener_void_int_struct
{
    jui_event_type_enum event_type;
    void (*listener) (kal_int32);
    struct _jui_widget_event_listener_void_int_struct *next;

} jui_widget_event_listener_void_int_struct;

typedef struct _jui_widget_event_listener_void_bool_struct
{
    jui_event_type_enum event_type;
    void (*listener) (kal_bool);
    struct _jui_widget_event_listener_void_bool_struct *next;

} jui_widget_event_listener_void_bool_struct;

typedef struct _jui_widget_mvm_event_listener_void_int_struct
{
    jui_event_type_enum event_type;
    void (*listener) (kal_int32);
    struct _jui_widget_mvm_event_listener_void_int_struct *next;

} jui_widget_mvm_event_listener_void_int_struct;

typedef struct _jui_widget_mvm_event_listener_void_int_int_struct
{
    jui_event_type_enum event_type;
    void (*listener) (kal_int32, kal_int32);
    struct _jui_widget_mvm_event_listener_void_int_int_struct *next;

} jui_widget_mvm_event_listener_void_int_int_struct;

typedef struct _jui_widget_mvm_event_listener_void_int_bool_struct
{
    jui_event_type_enum event_type;
    void (*listener) (kal_int32, kal_bool);
    struct _jui_widget_mvm_event_listener_void_int_bool_struct *next;

} jui_widget_mvm_event_listener_void_int_bool_struct;

typedef struct
{
    kal_uint16 * text;
    kal_int32 max_size;
    kal_int32 constraints;

    kal_bool is_validate;
    kal_bool is_finished;

    void (*callback)(kal_int32 display_id);
    
}jui_textfield_data_struct;

typedef struct
{
    kal_int32 year;
    kal_int32 month;
    kal_int32 day;

    kal_bool is_validate;
    kal_bool is_finished;

    void ( *callback) ( kal_int32 display_id);
    
}jui_datefield_data_struct;

typedef struct
{
    kal_int32 hour;
    kal_int32 minute;
    kal_int32 second;

    kal_bool is_validate;
    kal_bool is_finished;

    void ( *callback) ( kal_int32 display_id);
    
}jui_datefield_time_struct;


typedef struct
{
    kal_uint16 title[JUI_MAX_TITLE_LENGTH + 1];
    kal_int32 title_length;
    kal_uint16 *command_label[JUI_MAX_COMMAND_SUPPORT];
    kal_int32 command_label_length[JUI_MAX_COMMAND_SUPPORT];
    kal_int32 command_id[JUI_MAX_COMMAND_SUPPORT];
    kal_int32 command_num;
    kal_bool is_processing;
} jui_option_menu_struct;

typedef struct
{
    kal_uint16 title[JUI_MAX_TITLE_LENGTH + 1];
    kal_int32 title_length;
    kal_uint16 *command_label[JUI_MAX_COMMAND_SUPPORT];
    kal_int32 command_label_length[JUI_MAX_COMMAND_SUPPORT];
    kal_int32 command_id[JUI_MAX_COMMAND_SUPPORT];
    kal_int32 command_num;

} jui_popup_struct;


typedef struct
{
    kal_uint16 title[JUI_MAX_TITLE_LENGTH + 1];
    kal_int32 title_length;

    kal_uint16 ticker[JUI_MAX_TICKER_LENGTH + 1];
    kal_int32 ticker_length;

    kal_uint16 *command_label[JUI_MAX_COMMAND_SUPPORT];
    kal_int32 command_label_length[JUI_MAX_COMMAND_SUPPORT];
    kal_int32 command_id[JUI_MAX_COMMAND_SUPPORT];
    kal_int32 command_type[JUI_MAX_COMMAND_SUPPORT];
    kal_int32 command_num;

    kal_uint16 *text;
    kal_uint16 text_external[JUI_MAX_BUFFER_SUPPORT + 1];   /* this buffer is used by mmi */
    kal_int32 text_length;
    kal_int32 text_max_size;
    kal_int32 constraints;

    kal_bool is_editable;
    kal_bool is_constraints_changed;

    kal_bool is_shown;
	kal_bool is_data_ready;

} jui_textbox_data_struct;

typedef struct
{
    kal_uint8 softkey_label[JUI_MAX_SOFTKEYS][JUI_SOFTKEY_STR_BUF];
    kal_int32 softkey_label_length[JUI_MAX_SOFTKEYS];
    kal_uint16 title_buffer[(JUI_MAX_TITLE_LENGTH + 1)];
    kal_uint16 *lcd_buffer;

    kal_int32 screen_mode;
    kal_int32 old_screen_mode;

    kal_bool screen_mode_changed;
    kal_bool screen_mode_changed_in_fg_mmi;

    kal_bool title_is_shown;
    kal_bool ticker_is_shown;

    kal_uint8 default_screen_setting[JUI_SCREEN_MODE_END];
    kal_uint8 available_screen_setting;

    kal_int32 display_id;

    kal_bool buffer_disposed;

    kal_bool is_show_logo_screen;

    jui_option_menu_struct *option_menu;
    jui_popup_struct *popup;
    jui_textbox_data_struct *textbox;
    jui_textfield_data_struct * textfield;
    jui_datefield_data_struct * datefield;
    jui_datefield_time_struct * timefield;

    jui_screen_type_enum current_screen;
    jui_screen_type_enum previous_screen;

} jui_screen_data_struct;

typedef enum JUI_WIDGET_UI_STYLE_TYPE_NUM
{
    JUI_WIDGET_UI_STYLE_NORMAL,
    JUI_WIDGET_UI_STYLE_FTE,
    JUI_WIDGET_UI_STYLE_FTO,
    
    JUI_WIDGET_UI_STYLE_TOTAL
}jui_widget_ui_style_type_enum;

typedef enum JUI_WIDGET_TOUCH_FEEDBACK_TYPE_ENUM
{
    JUI_WIDGET_TOUCH_FEEDBACK_DOWN,
    JUI_WIDGET_TOUCH_FEEDBACK_HOLD,

    JUI_WIDGET_TOUCH_FEEDBACK_TOTAL
}jui_widget_touch_feedback_enum;


typedef enum JUI_WIDGET_SCREEN_ROTATE_TYPE_ENUM
{
    JUI_WIDGET_SCREEN_ROTATE_0,
    JUI_WIDGET_SCREEN_ROTATE_90,
    JUI_WIDGET_SCREEN_ROTATE_180,
    JUI_WIDGET_SCREEN_ROTATE_270,
    
    JUI_WIDGET_SCREEN_ROTATE_TOTAL
}jui_widget_screen_rotate_type_enum;

extern kal_int32 jui_widget_active_display_id;  /* JUI MVM */
extern jui_screen_data_struct g_jui_screen_data[JUI_MVM_SUPPORT_VM_NUM];        /* JUI MVM */

#define JUI_WIDGET_DEFAULT_DISPLAY_ID   0       /* JUI MVM */
#define JUI_WIDGET_UNKNOWN_DISPLAY_ID   -1
extern kal_bool jui_is_unregistered_lcd;
extern kal_bool jui_is_vm_drawing_lcd;
/*************************************************************************
 * Global Declaration
 *************************************************************************/
/* jui_editor.c */

#define jui_string_draw_string(pixel,clip,dst,dst_width,dst_height,dst_size,dotted,face,style,size,x,y,anchor,chararray,n) jui_string_mvm_draw_string(pixel,clip,dst,dst_width,dst_height,dst_size,dotted,face,style,size,x,y,anchor,chararray,n,JUI_WIDGET_DEFAULT_DISPLAY_ID)

extern void jui_init_cached_font_fill_data(void);
extern void jui_init_cached_font(void);
extern void jui_deinit_cached_font(void);
extern void jui_font_init(void);
extern void jui_string_mvm_draw_string(
                int pixel,
                short *clip,
                unsigned short *dst,
                int dst_width,
                int dst_height,
                int dst_size,
                int dotted,
                int face,
                int style,
                int size,
                int x,
                int y,
                int anchor,
                const kal_uint16 *chararray,
                int n,
                kal_int32 display_id);
extern void jui_string_get_font_info(int face, int style, int size, int *ascent, int *descent, int *leading);
extern int jui_string_get_width(int face, int style, int size, const kal_uint16 *charArray, int n);
extern int jui_string_get_width_ext(int face,int style,int size,const kal_uint16 * charArray,int n , int * width,int * adv_w);
extern kal_int32 jui_string_get_font_height(jui_font_lang_type_enum lang_type,jui_font_size_enum font_size);

/* jui_widget.c */

/* JUI MVM, added for MVM */
#define jui_widget_show_logo_screen(x1,y1,x2,y2)    jui_widget_mvm_show_logo_screen(x1,y1,x2,y2,JUI_WIDGET_DEFAULT_DISPLAY_ID)
#define jui_widget_refresh_screen(x1,y1,x2,y2)      jui_widget_mvm_refresh_screen(x1,y1,x2,y2,JUI_WIDGET_DEFAULT_DISPLAY_ID)
#define jui_widget_refresh_lcd(x1,y1,x2,y2)         jui_widget_mvm_refresh_lcd(x1,y1,x2,y2,JUI_WIDGET_DEFAULT_DISPLAY_ID)
#define jui_widget_register_lcd(refresh_screen)     jui_widget_mvm_register_lcd(refresh_screen,JUI_WIDGET_DEFAULT_DISPLAY_ID)
#define jui_widget_unregister_lcd()                 jui_widget_mvm_unregister_lcd(JUI_WIDGET_DEFAULT_DISPLAY_ID)
#define jui_widget_set_title(title,title_length)    jui_widget_mvm_set_title(title,title_length,JUI_WIDGET_DEFAULT_DISPLAY_ID)
#define jui_widget_show_title()                     jui_widget_mvm_show_title(JUI_WIDGET_DEFAULT_DISPLAY_ID)
#define jui_widget_is_title_displayed()             jui_widget_mvm_is_title_displayed(JUI_WIDGET_DEFAULT_DISPLAY_ID)
#define jui_widget_clear_screen()                   jui_widget_mvm_clear_screen(JUI_WIDGET_DEFAULT_DISPLAY_ID)
#define jui_widget_resume_screen()                  jui_widget_mvm_resume_screen(JUI_WIDGET_DEFAULT_DISPLAY_ID)
#define jui_widget_reset_screen()                   jui_widget_mvm_reset_screen(JUI_WIDGET_DEFAULT_DISPLAY_ID)
#define jui_widget_set_screen_mode(mode)            jui_widget_mvm_set_screen_mode(mode,JUI_WIDGET_DEFAULT_DISPLAY_ID)
#define jui_widget_get_screen_mode()                jui_widget_mvm_get_screen_mode(JUI_WIDGET_DEFAULT_DISPLAY_ID)
#define jui_widget_softkey_handler(keycode,keytype) jui_widget_mvm_softkey_handler(keycode,keytype,JUI_WIDGET_DEFAULT_DISPLAY_ID)
#define jui_widget_set_softkey(index,label,numChars,isUpdate)    jui_widget_mvm_set_softkey(index,label,numChars,isUpdate,JUI_WIDGET_DEFAULT_DISPLAY_ID)
#define jui_widget_draw_softkey(index,label,numChars,isUpdate)    jui_widget_mvm_draw_softkey(index,label,numChars,JUI_WIDGET_DEFAULT_DISPLAY_ID)
#define jui_widget_option_menu_show(title,title_length,callback,menu_list,menu_num,menu_ids)   jui_widget_mvm_option_menu_show(title,title_length,callback,menu_list,menu_num,menu_ids,JUI_WIDGET_DEFAULT_DISPLAY_ID)
#define jui_widget_option_menu_hide(callback)  jui_widget_mvm_option_menu_hide(callback,JUI_WIDGET_DEFAULT_DISPLAY_ID)
#define jui_widget_option_menu_is_finished()   jui_widget_mvm_option_menu_is_finished(JUI_WIDGET_DEFAULT_DISPLAY_ID)

#define jui_softkey_label           g_jui_screen_data[JUI_WIDGET_DEFAULT_DISPLAY_ID].softkey_label
#define jui_widget_act_mode_idx     g_jui_screen_data[JUI_WIDGET_DEFAULT_DISPLAY_ID].screen_mode
#define jui_lcd_buffer  g_jui_screen_data[JUI_WIDGET_DEFAULT_DISPLAY_ID].lcd_buffer

extern void jui_widget_mvm_show_logo_screen(kal_int32 x1, kal_int32 y1, kal_int32 x2, kal_int32 y2, kal_int32 display_id);
extern void jui_widget_mvm_refresh_screen(kal_int32 x1, kal_int32 y1, kal_int32 x2, kal_int32 y2, kal_int32 display_id);
extern void jui_widget_mvm_refresh_lcd(int x1, int y1, int x2, int y2, kal_int32 display_id);
extern void jui_widget_mvm_register_lcd(kal_bool refresh_screen, kal_int32 display_id);
extern void jui_widget_mvm_unregister_lcd(kal_int32 display_id);
extern void jui_widget_mvm_clear_screen(kal_int32 display_id);
extern void jui_widget_mvm_resume_screen(kal_int32 display_id);
extern void jui_widget_mvm_reset_screen(kal_int32 display_id);
extern void jui_widget_mvm_finalize_screen(kal_int32 display_id);

extern kal_bool jui_widget_mvm_set_softkey(
                    int index,
                    const kal_uint16 *label,
                    int numChars,
                    kal_bool isUpdate,
                    kal_int32 display_id);
extern void jui_widget_mvm_softkey_handler(kal_uint16 keycode, kal_uint16 keytype, kal_int32 display_id);
extern void jui_widget_mvm_set_softkeybar_visible(kal_bool visible, kal_int32 display_id);
extern void jui_widget_mvm_draw_softkey(int index, const kal_uint16 *label, kal_int32 label_length, kal_int32 display_id);
extern void jui_widget_mvm_redraw_softkeybar(kal_int32 display_id);
extern kal_bool jui_widget_mvm_softkey_is_label_same(kal_int32 index,const kal_uint16 *label,kal_int32 label_length,kal_int32 display_id);
    
extern void jui_widget_mvm_set_title(kal_uint16 *title, int title_length, kal_int32 display_id);
extern void jui_widget_mvm_show_title(kal_int32 display_id);
extern kal_bool jui_widget_mvm_is_title_displayed(kal_int32 display_id);

extern void jui_widget_mvm_set_screen_mode(jui_screen_mode_enum mode, kal_int32 display_id);
extern kal_int32 jui_widget_mvm_get_screen_mode(kal_int32 display_id);
extern kal_bool jui_widget_mvm_is_fullscreen_mode(kal_int32 display_id);

extern void jui_widget_mvm_set_current_screen(kal_int32 display_id, jui_screen_type_enum current);
extern jui_screen_type_enum jui_widget_mvm_get_current_screen(kal_int32 display_id);

extern void jui_widget_mvm_option_menu_show(
                kal_uint16 *title,
                kal_int32 title_length,
                kal_uint16 **command_label,
                kal_int32 *command_label_length,
                kal_int32 *command_id,
                kal_int32 command_num,
                kal_int32 display_id);

extern void jui_widget_mvm_option_menu_hide(kal_int32 display_id);
extern void jui_widget_mvm_option_menu_register_disppear_callback(void (*callback)(kal_int32 display_id));
extern kal_bool jui_widget_mvm_option_menu_is_finished(kal_int32 display_id);


extern void jui_widget_mvm_popup_show(
                kal_uint16 *title,
                kal_int32 title_length,
                kal_uint16 **command_label,
                kal_int32 *command_label_length,
                kal_int32 *command_id,
                kal_int32 command_num,
                kal_int32 display_id);

extern void jui_widget_mvm_popup_hide(kal_int32 display_id);
extern void jui_widget_mvm_popup_register_disppear_callback(void (*callback)(kal_int32 display_id));

extern void jui_widget_mvm_textbox_init(kal_int32 display_id);
extern void jui_widget_mvm_textbox_deinit(kal_int32 display_id);
extern kal_bool jui_widget_mvm_textbox_is_data_ready(kal_int32 display_id);
extern void jui_widget_mvm_textbox_set_title(kal_uint16 *title, kal_int32 title_length, kal_int32 display_id);
extern void jui_widget_mvm_textbox_set_ticker(kal_uint16 *ticker, kal_int32 ticker_length, kal_int32 display_id);
extern void jui_widget_mvm_textbox_set_max_size(kal_int32 max_size, kal_int32 display_id);
extern void jui_widget_mvm_textbox_set_constraints(kal_int32 constraints, kal_bool is_editable, kal_int32 display_id);
extern void jui_widget_mvm_textbox_set_commands(
                kal_uint16 **command_label,
                kal_int32 *command_label_length,
                kal_int32 *command_id,
                kal_int32 *command_type,
                kal_int32 command_num,
                kal_int32 display_id);
extern void jui_widget_mvm_textbox_set_text(kal_uint16 *text, kal_int32 text_length, kal_int32 display_id);
extern void jui_widget_mvm_textbox_paint_title(kal_int32 display_id);
extern void jui_widget_mvm_textbox_paint_ticker(kal_int32 display_id);
extern void jui_widget_mvm_textbox_paint_command(kal_int32 display_id);
extern void jui_widget_mvm_textbox_paint_text(kal_int32 display_id);
extern void jui_widget_mvm_textbox_show(kal_int32 display_id);
extern void jui_widget_mvm_textbox_hide(kal_int32 display_id);
extern kal_int32 jui_widget_mvm_textbox_get_text_length(kal_int32 display_id);
extern kal_int32 jui_widget_mvm_textbox_get_text(kal_uint16 *text, kal_int32 display_id);
extern void jui_widget_mvm_textbox_get_cursor_index(kal_int32 *cursor_index, kal_int32 display_id);
extern void jui_widget_mvm_textbox_bring_2_top(kal_int32 display_id);
extern void jui_widget_mvm_textbox_command_action_finished(kal_int32 display_id);

extern kal_bool jui_widget_mvm_textbox_is_visible(kal_int32 display_id);
extern kal_bool jui_widget_mvm_textbox_is_locked(kal_int32 display_id);

extern void jui_widget_mvm_textfield_show(kal_uint16 *text,kal_int32 text_length,kal_int32 max_size,kal_int32 constraints,void (*callback)(kal_int32 display_id),kal_int32 display_id);
extern void jui_widget_mvm_textfield_hide(kal_int32 display_id);
extern kal_int32 jui_widget_mvm_textfield_get_text(kal_uint16 * text,kal_int32 display_id);
extern kal_bool jui_widget_mvm_textfield_is_finished(kal_int32 display_id);
extern kal_bool jui_widget_mvm_textfield_is_validate(kal_int32 display_id);
extern kal_bool jui_widget_mvm_textfield_query(kal_int32 * max_size,kal_int32 * constraints,kal_int32 display_id);

extern void jui_widget_mvm_datefield_calendar_show(kal_int32 year, kal_int32 month, kal_int32 day,void (*callback)(kal_int32 display_id),kal_int32 display_id);
extern void jui_widget_mvm_datefield_calendar_hide(kal_int32 display_id);
extern void jui_widget_mvm_datefield_calendar_get_date(kal_int32 * year,kal_int32 * month,kal_int32 * day,kal_int32 display_id);
extern kal_bool jui_widget_mvm_datefield_calendar_is_finished(kal_int32 display_id);
extern kal_bool jui_widget_mvm_datefield_calendar_is_validate(kal_int32 display_id);

extern void jui_widget_mvm_datefield_time_show(kal_int32 hour, kal_int32 minute, kal_int32 second,void (*callback)(kal_int32 display_id),kal_int32 display_id);
extern void jui_widget_mvm_datefield_time_hide(kal_int32 display_id);
extern void jui_widget_mvm_datefield_time_get_date(kal_int32 * hour,kal_int32 * minute,kal_int32 * second,kal_int32 display_id);
extern kal_bool jui_widget_mvm_datefield_time_is_finished(kal_int32 display_id);
extern kal_bool jui_widget_mvm_datefield_time_is_validate(kal_int32 display_id);

extern void jui_widget_mvm_clear_mmi_screen_context(kal_int32 display_id);

extern kal_int32 jui_widget_mvm_get_ticker_height(void);
extern void jui_widget_mvm_set_ticker_height(kal_int32 height);
extern void jui_widget_mvm_set_ticker_visible(kal_bool visible, kal_int32 display_id);

extern kal_bool jui_widget_register_event_listener_void_void(jui_event_type_enum event, void (*listener) (void));
extern kal_bool jui_widget_register_event_listener_void_int(jui_event_type_enum event, void (*listener) (kal_int32));
extern kal_bool jui_widget_register_event_listener_void_bool(jui_event_type_enum event, void (*listener) (kal_bool));
extern kal_bool jui_widget_mvm_register_event_listener_void_int(jui_event_type_enum event,
                                                                void (*listener) (kal_int32));
extern kal_bool jui_widget_mvm_register_event_listener_void_int_int(jui_event_type_enum event,
                                                                    void (*listener) (kal_int32, kal_int32));
extern kal_bool jui_widget_mvm_register_event_listener_void_int_bool(jui_event_type_enum event,
                                                                     void (*listener) (kal_int32, kal_bool));

extern void jui_widget_unregister_event_listener_void_void(void);
extern void jui_widget_unregister_event_listener_void_int(void);
extern void jui_widget_unregister_event_listener_void_bool(void);
extern void jui_widget_mvm_unregister_event_listener_void_int(void);
extern void jui_widget_mvm_unregister_event_listener_void_int_int(void);
extern void jui_widget_mvm_unregister_event_listener_void_int_bool(void);

extern void jui_widget_mvm_fire_event_listener_void_void(kal_int32 display_id, jui_event_type_enum event_type);
extern void jui_widget_mvm_fire_event_listener_void_int(
                kal_int32 display_id,
                jui_event_type_enum event_type,
                kal_int32 data);
extern void jui_widget_mvm_fire_event_listener_void_bool(
                kal_int32 display_id,
                jui_event_type_enum event_type,
                kal_bool data);

extern kal_bool jui_widget_mvm_is_in_menu(void);
extern kal_bool jui_widget_mvm_is_in_fullscreen(void);
 

extern void jui_widget_set_draw_softkey_by_vm(kal_bool draw);
extern void jui_widget_set_back_from_mmi(kal_bool autoback);
extern kal_bool jui_widget_is_auto_back_from_mmi(void);

extern kal_bool jui_widget_is_support_native_permission_dialog(void);

/******  common interface ***********************/
extern void jui_widget_get_display_properties(
                int *width,
                int *height,
                int *adornedHeight,
                int *fg_color,
                int *erase_color,
                int *depth,
                int *alphaLevels,
                int vm_id);
extern kal_int32 jui_widget_get_display_height(void);
extern kal_int32 jui_widget_get_display_width(void);
extern kal_int32 jui_widget_get_button_bar_height(void);
extern kal_int32 jui_widget_get_title_bar_height(void);
extern kal_int32 jui_widget_get_status_bar_height(void); //20110228 : added for repaint status bar


extern kal_bool jui_widget_play_sound(int soundType);
extern kal_bool jui_widget_set_backlight(kal_bool mode);

extern kal_int32 jui_widget_init_layer(void);
extern kal_int32 jui_widget_init_layer_ext(kal_int32(*jui_init_layer_trial_cb) (void));
extern void jui_widget_deinit_layer(void);

extern kal_uint16 *jui_widget_get_active_lcd_buffer(void);  /* JUI MVM */
extern kal_uint16 *jui_widget_mvm_get_lcd_buffer(kal_int32 display_id);

extern kal_uint16 *jui_widget_init_asm_buffer(void);
extern void jui_widget_deinit_asm_buffer(void);

#ifdef J2ME_SUPPORT_BACKGROUND
extern void jui_widget_update_vm_bg_status_icon(kal_bool dipslay, kal_int32 display_id);
#endif 

extern void jui_widget_start_double_buffer(void);
extern void jui_widget_stop_double_buffer(void);
extern void jui_lcd_mutex_lock(void);
extern void jui_lcd_mutex_unlock(void);

extern kal_int32 jui_set_device_bmp_header(
                    kal_int32 pixel_size,
                    kal_int32 width,
                    kal_int32 height,
                    kal_char *icon_mmi_fmt);

extern kal_char *jui_decode_jpeg_image(kal_char *buffer, kal_int32 length,
                                           kal_int32(*get_image) (kal_int32 width, kal_int32 height, kal_char **dst),
                                           kal_char **errThrowClassName);
extern kal_char *jui_mvm_decode_jpeg_image(kal_char *buffer, kal_int32 length,
                                           kal_int32(*get_image) (kal_int32 width, kal_int32 height, kal_char **dst),
                                           kal_char **errThrowClassName, kal_int32 display_id);
extern kal_char *jui_decode_gif_image(char *buffer, int length, kal_bool *is_transparent,
                                      kal_int32(*get_image) (kal_int32 width, kal_int32 height, kal_char **dst),
                                      char **errThrowClassName);

/***** interface for FTE ****************************/
extern jui_widget_ui_style_type_enum jui_widget_get_ui_style(void);
extern kal_int32 jui_widget_get_item_height(void);
extern void jui_widget_get_ssp_threshold_propeties(kal_int32 * gap_to_move,kal_int32 *gap_to_ss,kal_int32 *time_to_ss);
extern void jui_widget_touch_feedback_play(jui_widget_touch_feedback_enum feedback_type);
extern void jui_widget_touch_feedback_play_handler(void * msgstruct);
extern void jui_widget_firstscreen_notify(void);

/***** interface for FTE ****************************/

extern kal_int32 jui_widget_mvm_get_display_x(void);
extern kal_int32 jui_widget_mvm_get_display_y(void);
extern kal_int32 jui_widget_mvm_get_display_width(void);
extern kal_int32 jui_widget_mvm_get_display_height(kal_int32);
extern kal_int32 jui_widget_mvm_get_display_height_by_screen_mode(kal_bool is_full_screen,kal_int32 handle);

extern kal_uint16 *jui_widget_mvm_malloc_lcd_buffer(kal_int32 display_id);
extern void jui_widget_mvm_release_lcd_buffer(kal_int32 display_id, kal_uint16 *lcd_buffer);

extern kal_bool jui_widget_mvm_is_support_virtual_keypad(kal_int32 display_id);
extern kal_int32 jui_widget_mvm_get_virtual_keypad_height(kal_int32 display_id);

extern void jui_widget_sort_commands(kal_int32 * id,kal_int32 * type,kal_int32 * priority,kal_int32 num);
extern void jui_widget_set_auto_sort_commands(kal_bool autoSort); /*TRUE: mmi will auto exchange the first two commands*/
extern kal_bool jui_widget_is_auto_sort_commands(void);

void jui_widget_mvm_rotate_screen(kal_int32 display_id);

extern kal_bool jui_widget_is_support_repaint_enhancement(void);
#endif /* _JUI_INTERFACE_H */ 

